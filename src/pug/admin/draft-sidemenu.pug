//- module

style(style="text/css").
  [ld=brd-head] [ld=cart] { transform: rotate(0deg); transition: all .25s ease-in-out }
  [ld=brd-head].on [ld=cart] { transform: rotate(180deg) }
  .admin-sidemenu::-webkit-scrollbar {
    background-color: #fff!important;
  }

.admin-sidemenu.bg-dark.text-white.text-left(style="width:200px;overflow-y:scroll;overflow-x:hidden;flex:0 0 auto")
  +scope("sidemenu-brd-info")#brd-info.sticky.z-fixed.bg-dark.d-flex.flex-column.no-select(
  style="top:0;transition:height .25s ease-in-out")
    div(ld="brd-head")
      if org
        .folder.border-bottom.border-secondary.text-sm.no-dart(ld="nav",data-nav="main")
          .folder-item.folder-toggle.d-flex.align-items-center.py-3.pr-3.pl-0
            .mr-1: .bg-light.rounded(style="width:1.35em;height:1.35em")
            .flex-grow-1.text-truncate.text-capitalize #{org.name || '未命名的組織'}
            .ml-1 #[i.i-bars]
          .folder-menu.pb-3
            .folder-item(ld="nav-tab",data-name="org-config",data-nav="main") 組織設定
            .folder-item(ld="nav-tab",data-name="org-navbar",data-nav="main") 選單列
            .folder-item(ld="nav-tab",data-name="org-config",data-nav="main") 頁面編輯器
            //-.folder-item(ld="nav-tab",data-name="org-config",data-nav="main") 其它組織 ...


      .clickable(style="box-shadow:0 2px 3px rgba(0,0,0,1)")
        .d-flex.align-items-center.p-3.w-100
          if brd
            .flex-grow-1.text-truncate
              .text-sm.text-muted
                span 活動
                - st = new Date(brd.starttime)
                - now = new Date()
                - et = new Date(brd.endtime)
                - progress = (!st || now < st) ? 0 : (et && now > et ? 2 : st ? 1 : 0)

                span.ml-2(class=["text-warning", "text-success", "text-secondary"][progress])
                  i.i-radio
                  | #{["尚未開始", "進行中", "已結束"][progress]}
              .text-truncate.text-capitalize #{brd.name || '未命名的活動'}
            .ml-2(ld="cart") #[i.i-dart-down]
          else
            .flex-grow-1.text-truncate 請選擇活動 ...

    //- overflow: hidden - 讓 windows chrome 不會出現兩個 scrollbar
    //- 但這樣就讓 content 無法捲動.  TODO 試著把 brd list 移到 sticky 之外看看.
    .border-top.border-secondary(ld="brd-list",
    style="overflow:hidden;height:0;transition:height .5s cubic-bezier(0,1,0,1)"): .py-2
      //-.px-3.py-2
        div 目前尚沒有任何活動可供您做選擇。
        .py-4.px-2.text-center
          .btn.btn-primary(href="#") 立刻建立活動
      .px-3.py-2.text-sm.d-flex
        b.flex-grow-1 活動列表
        .text-underline.text-white(href="#") 建立新活動
      .px-3.pb-2: input.form-control.form-control-sm.rounded(placeholder="搜尋...")
      .px-3.py-2.clickable(ld-each="boards") #[span]#[.text-muted.text-sm]

  .pt-2(ld="nav",data-nav="main")

    .folder-item(ld="nav-tab",data-name="brd-config") 活動設定
    a.folder-item.d-flex(href="#")
      .flex-grow-1 入口頁面
      div: i.i-link
    .folder.show
      .folder-toggle.folder-item 客製頁面
      .folder-menu
        .folder-item(ld="nav-tab",data-name="brd-navbar") 選單列
        a.folder-item.d-flex(href="edit.html")
          .flex-grow-1 頁面編輯器
          div: i.i-link
    .folder-item 建立複本

    .border-bottom.border-secondary.my-2

    .project-groups
      .folder(ld-each="project-group")
        .folder-toggle.folder-item(ld="name") 分組
        .folder-menu
          .folder-item(ld="nav-tab",data-name="prj-config") 設定
          .folder-item(ld="nav-tab",data-name="prj-list") 專案列表
          .folder-item(ld="nav-tab",data-name="prj-judge") 評選資訊
          .folder-item(ld="nav-tab",data-name="prj-form") 提案表
      .folder-item(ld="project-group-add") 新增分組 ...

    .my-4

  +script("/js/admin/menu.js")
