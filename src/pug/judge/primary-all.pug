extends /base.pug
block vars
  - ctrl.navtop.shown = false
  - ctrl.navtop.placeholder = false
  - ctrl.foot.shown = false
block body
  .h-100.w-100.d-flex.flex-column
    .p-2.d-flex
      .flex-grow-1.p-2
        span.mr-4(ld="grp-name")
        span #[i.i-radio.text-success] 初審總表
      div
        .p-2 Kirby #[i.i-dart-down]

    .flex-grow-1.d-flex.w-100(style="overflow:hidden;margin-top:-.5em")
      .d-flex.flex-column(style="flex:3 2 55%")

        .flex-grow-1.bg-white.border-top.border-bottom.mt-3(style="overflow:scroll")
          .w-100
            .p-2.d-flex.align-items-center.border-bottom.border-secondary.bg-light.sticky.shadow-sm(style="top:0")
              .mr-2.text-right.px-2(style="width:50px") 編號
              .mr-2.text-right.px-2(style="width:50px") 資格
              //-.mr-2.text-right.px-2(style="width:50px") 評論
              .flex-grow-1.clickable(ld="sort",data-name="name") 提案名稱
              .mx-2(ld="sort",data-name="shortlist") 入選標記

              .d-flex.justify-content-center.align-items-center(style="width:200px")
                .d-flex.align-items-center(ld="sort",data-name="primary-all",data-value="accept")
                  .bg-success.d-inline-block.mr-1.rounded(style="width:1em;height:1em")
                  span.mr-3 推薦
                .d-flex.align-items-center(ld="sort",data-name="primary-all",data-value="pending")
                  .bg-warning.d-inline-block.mr-1.rounded(style="width:1em;height:1em")
                  span.mr-3 面議
                .d-flex.align-items-center(ld="sort",data-name="primary-all",data-value="reject")
                  .bg-danger.d-inline-block.mr-1.rounded(style="width:1em;height:1em")
                  span 汰除

            div(ld-each="project")
              .px-2.py-1.d-flex.align-items-center.border-bottom.border-light
                .mr-2.text-right.px-2(ld="index",style="width:50px")
                .mr-2.text-center.px-2(ld="criteria",style="width:50px") #[i.i-check.text-success]
                .flex-grow-1.text-truncate
                  .text-underline.clickable(ld="name")
                  .text-sm.text-muted(ld="ownername")
                .mx-2.rounded.text-center.text-secondary.bg-light.clickable.py-1(
                ld="pick",style="width:4em"): i
                .px-1(style="flex:0 0 200px")
                  div: .progress.w-100
                    .progress-bar.bg-success(ld="progress",data-name="accept")
                    .progress-bar.bg-warning(ld="progress",data-name="pending")
                    .progress-bar.bg-danger(ld="progress",data-name="reject")
                  .d-flex.align-items-center.text-sm.mt-1.ml-1(style="line-height:1em")
                    each c in [["bg-success","accept"],["bg-warning","pending"],["bg-danger","reject"]]
                      .d-flex.align-items-center.mr-3
                        .d-inline-block.rounded.mr-1(style="width:1.1em;height:1em;",class=c[0])
                        span(ld="count", data-name=c[1])

      div(style="flex:2 3 45%")
        .card.border.shadow.w-100.h-100(style="overflow:hidden;border-radius: .5em 0 0 .5em"): .card-body.p-0
          iframe.border-0.w-100.h-100(ld="iframe")
          .w-100.h-100.vertical-center.position-absolute.z-float.bg-light(
          ld="iframe-placeholder",style="top:0;left:0")
            .w-100.text-center.text-muted
              .text-lg 提案瀏覽區
              div 您可以點擊左方的提案名稱以在此瀏覽該提案內容

          //-object.w-100.h-100(data="/assets/sample/simple-pdf.pdf",type="application/pdf")
            embed(src="/assets/sample/simple-pdf.pdf",type="application/pdf")
block script
  +script("/dash/assets/lib/ldsite/0.0.2/ldsite.min.js")
  +script("/dash/assets/lib/sharedb-wrapper/client.bundle.min.js")
  +script("/dash/js/util/sdb-adapter.js")
  +script("/dash/js/util/hub.js")
  +script("/dash/js/judge/base.js")
  +script("/dash/js/judge/primary-all.js")
  script: :lsc
    ldc.register <[judgePrimaryAll]>, ->
