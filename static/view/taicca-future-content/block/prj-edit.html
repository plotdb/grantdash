<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="/dash/assets/felib/bootstrap/main/dist/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/dash/assets/felib/@loadingio/bootstrap.ext/main/index.min.css"><link rel="stylesheet" type="text/css" href="/dash/assets/felib/ldcover/main/index.min.css"><link rel="stylesheet" type="text/css" href="/dash/assets/felib/ldloader/main/index.min.css"></head><body><script type="text/javascript" src="/dash/assets/felib/proxise/main/index.min.js" defer></script><script type="text/javascript" src="/dash/assets/felib/@loadingio/debounce.js/main/index.min.js" defer></script><script type="text/javascript" src="/dash/assets/felib/@loadingio/ldquery/main/index.min.js" defer></script><script type="text/javascript" src="/dash/assets/felib/i18next/main/dist/umd/i18next.min.js" defer></script><script type="text/javascript" src="/dash/assets/felib/i18next-browser-languagedetector/main/dist/umd/i18nextBrowserLanguageDetector.min.js" defer></script><script type="text/javascript" src="/dash/assets/felib/ldview/main/index.min.js" defer></script><script type="text/javascript" src="/dash/assets/felib/ldcover/main/index.min.js" defer></script><script type="text/javascript" src="/dash/assets/felib/ldloader/main/index.min.js" defer></script><script type="text/javascript" src="/dash/assets/felib/@plotdb/semver/main/index.min.js" defer></script><script type="text/javascript" src="/dash/assets/felib/@plotdb/rescope/main/index.min.js" defer></script><script type="text/javascript" src="/dash/assets/felib/@plotdb/csscope/main/index.min.js" defer></script><script type="text/javascript" src="/dash/assets/felib/@plotdb/block/main/index.min.js" defer></script><script type="module">// Generated by LiveScript 1.3.0
ldc.register("blockbase", ['viewLocals', 'auth', 'ldNotify', 'error', 'notify'], function(arg$){
  var viewLocals, auth, error, notify;
  viewLocals = arg$.viewLocals, auth = arg$.auth, error = arg$.error, notify = arg$.notify;
  return {
    init: function(arg$){
      var mainBlock, host, lc, this$ = this;
      mainBlock = arg$.mainBlock, host = arg$.host;
      lc = {};
      return i18next.init({
        supportedLng: ['en', 'zh-TW'],
        fallbackLng: 'zh-TW',
        fallbackNS: '',
        defaultNS: ''
      }).then(function(){
        return i18next.use(i18nextBrowserLanguageDetector);
      }).then(function(){
        console.log("use language: ", navigator.language) || navigator.userLanguage;
        return i18next.changeLanguage(navigator.language) || navigator.userLanguage;
      }).then(function(){
        return block.i18n.use(i18next);
      }).then(function(){
        var mgr;
        lc.manager = mgr = new block.manager({
          registry: function(arg$){
            var name, version, path, type;
            name = arg$.name, version = arg$.version, path = arg$.path, type = arg$.type;
            return type === 'block'
              ? "/dash/assets/felib/" + name + "/" + (version || 'main') + "/" + (path || 'index.html')
              : "/dash/assets/felib/" + name + "/" + (version || 'main') + "/" + (path || 'index.min.js');
          }
        });
        return mgr.get(mainBlock).then(function(bc){
          return bc.create();
        }).then(function(bi){
          return bi.attach({
            root: document.body
          }).then(function(){
            return bi['interface']();
          }).then(function(itf){
            itf.adapt(host);
            return itf.pubsub.on('change-language', function(it){
              i18next.changeLanguage(it);
              return bi.transform('i18n');
            });
          });
        }).then(function(){
          return console.log('ok');
        });
      });
    }
  };
});</script></body></html>