<div><div class="ldcv" ld="ldcv" data-name="application-closed" data-lock="true"><div class="base w-480 rwd"><div class="inner card"><div class="card-body"><div class="p-4"><div class="text-center"><h2 t>案件修改已經截止</h2><br></div><p>現在已經過了表定的開放時間，您已無法再做任何修改。若您有任何問題，請洽承辦人員。</p></div></div></div></div></div><div class="application"><div class="inner"><div class="main"><plug name="form"></plug></div><div class="side print-hide"><div class="sticky"><plug name="toc"></plug><div class="mb-4" ld="is-pending"><div class="text-sm mb-1" t>編輯進度</div><div class="progress"><div class="progress-bar progress-bar-striped progress-bar-animated" ld="progress"></div></div></div><div class="d-flex flex-column g-2 functions"><div class="btn btn-outline-secondary btn-sm disabled d-none" t ld="submitted">已送件</div><div class="btn btn-outline-secondary btn-sm" ld="save is-pending"><span t>暫存</span> <i class="i-save"></i></div><div class="btn btn-primary btn-sm" ld="submit is-pending"><span t>送件</span> <i class="i-upload"></i></div><div class="btn btn-primary btn-sm" ld="print"><span t>列印</span> <i class="i-print"></i></div><div class="btn btn-primary btn-sm" ld="invalid-check is-pending"><span t>檢查</span> <i class="i-exclamation-circle"></i></div><div class="text-sm" ld="invalid-info is-pending"></div></div><div class="my-4"><hr></div><div ld="is-pending"><div ld="countdown"></div></div></div></div></div></div><div class="print-hide"><div class="mb-2 text-secondary text-center text-sm text-uppercase">powered by grantdash</div><br></div><div class="ldcv for-print" ld="print-modal"><div class="base"><div class="inner"><iframe></iframe><div class="position-fixed d-flex g-4 justify-content-start bg-white w-100 p-4 border-top" style="bottom:0em;left:0em"><div class="btn btn-lg btn-primary px-4" t data-ldcv-set="print">確認列印 <i class="i-print"></i></div><div class="btn btn-lg btn-outline-secondary" t data-ldcv-set="">取消</div></div></div></div></div><style type="text/css">html,body{width:100%;height:auto}body{background:red}:scope{height:100%;background:#f5f6f7}.application{position:relative;width:100%;background:#f5f6f7;padding:3.5em 1.5em 1.5em;margin:0}.application *[t]:first-letter {text-transform:uppercase}.application:before{display:block;content:" ";position:fixed;width:17px;height:160px;left:1em;top:1em}.application .inner{display:flex;width:1024px;margin:auto;background:#fff;border:1px solid #d5d6d7;box-shadow:0 6px 12px rgba(0,0,0,0.1);border-radius:.25em}.application .main{flex:1 0 0}.application .sect{padding:3em 3em 0 3em}.application .side{min-width:10em;border-left:1px solid #e6e7e8;padding:3em 1.5em 3em 1.5em}.application .side .sticky{top:1em}.application h1{font-size:2.2em}.application h2{font-size:1.7em}.application h3{font-size:1.5em}.application h4{font-size:1.3em}.application h5{font-size:1.2em}.application h6{font-size:1.15em}.application .form-group{margin-bottom:1.5em}.application .card{break-inside:avoid;box-shadow:0 3px 6px rgba(0,0,0,0.075);margin:2em 0 3em;position:relative;padding-left:.5em;padding-right:.5em}.application .card:before{position:absolute;width:.5em;height:100%;top:0;left:0;background:repeating-linear-gradient(45deg,#e6e7e8,#e6e7e8 10px,#b6b7b8 10px,#b6b7b8 20px);content:" ";display:block;border-radius:.25em 0 0 .25em}.application .card .head{display:inline-block;font-size:1.33em;padding:0 .5em;background:#fff;margin-top:-0.66em;margin:-0.66em 0 0 1em;width:fit-content}.application .functions>.btn{display:flex;justify-content:space-around}:scope.printing .print-hide{display:none}:scope.printing .application{padding:2em 0 8em 0}:scope.printing .application .inner{border:0;box-shadow:none;border-radius:0}.ldcv.for-print .base{width:96%;height:96%}.ldcv.for-print .inner{overflow:scroll}.ldcv.for-print iframe{position:fixed;width:100%;height:100%;min-width:960px;margin:auto;top:0;bottom:0}</style><script type="@plotdb/block">var mod;module.exports={pkg:{name:"@taiccadash/base",dependencies:[{name:"ldview"},{name:"ldcover"},{name:"ldcover",path:"index.min.css"},{name:"@loadingio/debounce.js"},{name:"@plotdb/form"}],i18n:{en:{"檢查":"validate","列印":"print","已送件":"submitted","送件":"submit","暫存":"save","編輯進度":"editing progress","取消":"cancel","確認列印":"confirm and print","沒有錯誤，可以送件":"ready to submit","找到":"found","個錯誤":"error(s)"}}},interface:function(){return this.view},init:function(t){var i,r,o,a,u,s,n,d=this;i=t.root,r=t.ctx,o=t.manager,a=t.pubsub,u=t.i18n,s=t.t;n=new Promise(function(e,t){return a.on("init",function(t){var n;t==null&&(t={});d.view=n=new mod;n.pubsub=a;return n.init({root:i,ctx:r,manager:o,pubsub:a,i18n:u,t:s},t).then(function(){return e()})})});return n}};mod=function(){this._evthdr={};return this};mod.prototype=import$(Object.create(Object.prototype),{on:function(t,e){var i=this;return(Array.isArray(t)?t:[t]).map(function(t){var n;return((n=i._evthdr)[t]||(n[t]=[])).push(e)})},fire:function(t){var n,e,i,r,o,a,u,s=[];e=[];for(i=1,r=arguments.length;i<r;++i){e.push(arguments[i])}n=e;for(i=0,a=(o=this._evthdr[t]||[]).length;i<a;++i){u=o[i];s.push(u.apply(this,n))}return s},init:function(t,n){var r,e,i,o,a,u,s,d,l,c,f,m,v,h,p=this;r=t.root,e=t.ctx,i=t.manager,o=t.pubsub,a=t.i18n,u=t.t;s=e.ldview,d=e.ldcover,l=e.form,c=e.debounce;this._invalid={list:[]};this._ldcv={};this._submod=n;this._save=c(function(t,n){t==null&&(t=true);n==null&&(n={});return p.save(t,n)});this._changeLanguage=function(t){var n,e,i;if(!this.host){return}this.host.changeLanguage(t);for(n in e=this._submod.info.fields){i=e[n];if(!i.bi){continue}i.bi.transform("i18n");i.itf.render()}return this._countdown.instance.transform("i18n")};o.on("change-language",function(t){return p._changeLanguage(t)});this._state={locked:function(){return p.formmgr.status()!==0||p.prj.state==="active"},valid:function(){return p.formmgr.status()===0},active:function(){return p.prj&&p.prj.state==="active"}};f={mode:"edit"};this.formmgr=m=new l.manager;this._invalid.check=c(function(r){var t;r==null&&(r=false);t=r?m.check(null,true):Promise.resolve();return t.then(function(t){var n,e,i;if(Array.isArray(t)){p._invalid.list=t}t=p._invalid.list.map(function(t){return t.widget.root()});if(r){n=!p._invalid.node?t[0]:t[(t.indexOf(p._invalid.node)+1)%t.length];p._invalid.node=n;if(n){e=n.getBoundingClientRect();if(true||(e.top<0||e.top+e.height>window.innerHeight)){i=e.top+window.pageYOffset-60;window.scrollTo({top:i,behavior:"smooth"})}}}return h.render("invalid-info")})});m.on("readystatechange",function(){return h.render(["submit","print","invalid-info","save"])});m.on("status",function(n){var t;if(n.status===2&&!p._invalid.list.filter(function(t){return t.path===n.path}).length){p._invalid.list.push(n);p._invalid.check()}else if(t=p._invalid.list.filter(function(t){return t.path===n.path})[0]){p._invalid.list.splice(p._invalid.list.indexOf(t),1);p._invalid.check()}return h.render("progress")});m.on("change",function(t){var n,e,i;n=t.widget,e=t.path,i=t.value;p._submod.render();return p._save()});v=i;this._ldview=h=new s({root:document.body,action:{click:{preview:function(){if(p._state.active()){return}f.mode=f.mode==="edit"?"view":"edit";return m.mode(f.mode)},save:function(){return p._save(false,{submit:false}).now()},"invalid-check":function(){return p._invalid.check(true).now()},print:function(){var i;if(!p._state.valid()){return}p.render();i=m.mode();return m.mode("view").then(function(){var t,n,e;t=f.ldcv.get(true);n='<html><head>\n<base href="'+window.location.protocol+"//"+window.location.host+'"/>\n</head><body style="display:none">';n+=r.outerHTML;ld$.find("link").map(function(t){return n+=t.outerHTML});ld$.find("style").map(function(t){return n+=t.outerHTML});n+='<script type="text/javascript">\ndocument.querySelector("[scope]").classList.add("printing");\ndocument.body.style.display = "block";\n<\/script>\n</body></html>';e=URL.createObjectURL(new Blob([n],{type:"text/html"}));f.ldcv.root().querySelector("iframe").src=e;m.mode(i||"edit");return t.then(function(t){if(t!=="print"){return}return f.ldcv.root().querySelector("iframe").contentWindow.print()})})},submit:function(t){var n;n=t.node;if(p._state.locked()){return}return p._save(false,{submit:true}).now()},lng:function(t){var n;n=t.node;return p._changeLanguage(n.getAttribute("data-name"))}}},handler:{"@":function(){return p.formmgr.mode(p._state.active()?"view":"edit")},print:function(t){var n;n=t.node;return n.classList.toggle("disabled",!p._state.valid())},submit:function(t){var n;n=t.node;return n.classList.toggle("disabled",p._state.locked())},progress:function(t){var n;n=t.node;return n.style.width=m.progress().percent*100+"%"},submitted:function(t){var n;n=t.node;return n.classList.toggle("d-none",!p._state.active())},"is-pending":function(t){var n;n=t.node;return n.classList.toggle("d-none",p._state.active())},"invalid-info":function(t){var n,e;n=t.node;if(!(p._invalid.list!=null)){return n.innerText=""}e=p._invalid.list.length;n.classList.toggle("text-danger",e);n.classList.toggle("text-success",!e);return n.innerText=e?u("找到")+(" "+e+" ")+u("個錯誤"):m.status()===0?u("沒有錯誤，可以送件"):""}},init:{"print-modal":function(t){var n;n=t.node;return f.ldcv=new d({root:n})},ldcv:function(t){var n,e,i;n=t.node;e=n.getAttribute("data-name");i=n.getAttribute("data-lock");return p._ldcv[e]=new d({root:n,lock:i===true})},countdown:function(t){var n,e;n=t.node;e={config:{deadline:p._submod.info.deadline||Date.now()}};return v.from({name:"@makeform/countdown"},{root:n,data:e}).then(function(t){return p._countdown=t})},block:function(t){var n,e,i;n=t.node;e=n.getAttribute("data-name");i=p._submod.info.fields[e];if(!i.meta.title){i.meta.title=e}return v.from({name:i.type||"@makeform/input",version:"main"},{root:n,data:i.meta}).then(function(t){i.itf=t["interface"];i.bi=t.instance;return m.add({widget:i.itf,path:e})})}}});return h.init().then(function(){p.adapt();n.init(p);if(p._countdown["interface"].status()===2){p._ldcv["application-closed"].get()}return p._countdown["interface"].on("status",function(t){if(t===2){return p._ldcv["application-closed"].get()}})})},load:function(t){var n,e,i,r;t==null&&(t={});this.data=t;n=this._submod.info.subset||"";e=t?(n?t[n]:t)||{}:null;i=localStorage.getItem("@taicca/"+this.prj.brd+"/prj/"+this.prj.slug+"/"+n);if(i){i=JSON.parse(i)}r=!e||!e._modifiedtime||i&&i._modifiedtime>e._modifiedtime?r=i:e;this.formmgr.value(r,{init:true});this.render();this.pubsub.fire("after.load");return this.fire("after.load")},save:function(e,i){var r=this;e==null&&(e=true);i==null&&(i={});return Promise.resolve().then(function(){var t,n;if(r._state.active()){return}t=r._submod.info.subset||"";n=r.formmgr.value();n._modifiedtime=Date.now();if(!t){r.data=n}else{r.data[t]=n}localStorage.setItem("@taicca/"+r.prj.brd+"/prj/"+r.prj.slug+"/"+t,JSON.stringify(n));console.log("saved locally.");if(!r.host||e){return}return r.host.save(import$(import$({data:r.data,submit:false},r._submod.brief()),i)).then(function(t){import$(r.prj,t);console.log("saved remotely.");return r.render()})})},adapt:function(t){var n,e,i,r,o=[],a=this;if(t!=null){this.host=t}if(!this.host){return}if(n=this._submod.info.defaultLanguage){this._changeLanguage(n)}this.prj=t.info.prj;for(e in i=this._submod.info.fields){r=i[e];if(!r.itf){continue}o.push(u(e,r))}return o;function u(i,t){return t.itf.adapt({upload:function(t){var n,e;n=t.file,e=t.progress;return a.host.upload({file:n,progress:e,field:i})}})}},render:function(){this._ldview.render();return this._submod.render()}});function import$(t,n){var e={}.hasOwnProperty;for(var i in n)if(e.call(n,i))t[i]=n[i];return t}</script></div>