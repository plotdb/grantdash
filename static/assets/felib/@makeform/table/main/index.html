<div><div plug="widget"><table class="table"><tr><th ld-each="head"></th><th>&nbsp;</th></tr><tr ld="no-data"><td class="text-muted" colspan="99">無資料</td></tr><tr ld-each="row"><td style="vertical-align:middle;" ld-each="field"></td><td><div class="btn btn-outline-secondary text-nowrap" t ld="delete">刪除</div></td></tr><tr><td ld-each="field"></td><td><label>&nbsp;</label><div class="btn btn-outline-secondary text-nowrap" t ld="add">加入</div></td></tr></table></div><style type="text/css">label{white-space:nowrap}</style><script type="@plotdb/block">var mod;module.exports={pkg:{name:"@makeform/table",extend:{name:"@makeform/base"},i18n:{en:{"加入":"Add"}}},init:function(n){return n.pubsub.fire("init",{mod:mod(n)})}};mod=function(n){var t,e,r,i,o,a,u,c,f;t=n.root,e=n.ctx,r=n.data,i=n.parent,o=n.t,a=n.manager;u=e.ldview;c={rows:[]};f=r||{};f.config||(f.config={});return{init:function(){var r,n=this;r=function(){return n.value(c.rows)};return this.view=new u({root:t,action:{click:{add:function(n){var t;t=n.views;c.rows=c.rows.concat([f.fields.map(function(n){return n.meta.itf.value()})]);r();return t[0].render()}}},handler:{"no-data":function(n){var t;t=n.node;return t.classList.toggle("d-none",c.rows&&c.rows.length)},head:{list:function(){return f.fields.map(function(n,t){return{config:n,key:t}})},key:function(n){return n.key},text:function(n){var t;t=n.data;return o(t.config.meta.title||"untitled")}},row:{list:function(){return c.rows.map(function(n,t){return{list:n,idx:t}})},view:{action:{click:{delete:function(n){var t,e;t=n.views,e=n.ctx;c.rows.splice(e.idx,1);r();return t[1].render()}}},handler:{field:{list:function(n){var t;t=n.ctx;return t.list},text:function(n){var t;t=n.data;return o(t)}}}}},field:{list:function(){return f.fields.map(function(n,t){return{config:n,key:t}})},key:function(n){return n.key},view:{init:{"@":function(n){var t,e,r;t=n.ctx,e=n.node;r=t.config;return a.get({name:r.type||"input"}).then(function(n){return n.create()}).then(function(n){return n.attach({root:e,data:r.meta}).then(function(){r.meta.bi=n;return r.meta.itf=n["interface"]()})})}},handler:{"@":function(n){var t;t=n.ctx;if(!t.config.meta.itf){return}t.config.meta.bi.transform("i18n");return t.config.meta.itf.render()}}}}}})},render:function(){return this.view.render()}}};</script></div>