function import$(n,r){var e={}.hasOwnProperty;for(var t in r)e.call(r,t)&&(n[t]=r[t]);return n}ldc.register("adminGuard",["auth","loader"],function(n){var r,e,t;return r=n.auth,(e=n.loader).on(),r.ensure().then(function(){var n,r,e,o;return n=/^\/([ob])\/([^/]+)\/admin/.exec(window.location.pathname)||[],n[0],r=n[1],e=n[2],o=import$({},r?"o"===r?{org:e}:{brd:e}:{}),ld$.fetch("/d/toc/",{method:"POST"},{json:o,type:"json"}).catch(function(){return lda.ldcvmgr.lock("create-brd-now")}).then(function(n){return t(n)}).catch(function(n){return console.log(n),lda.ldcvmgr.toggle("error")})}).catch(function(){return lda.ldcvmgr.toggle("auth-required")}),t=function(n){var r,t,o,d,i,u,a;for(n.org=n.org||{},n.brd=n.brd||{},n.brds=n.brds||[],n.brdsFiltered=n.brds||[],r=[],t=1;t<4;++t)o=t,r.push({name:"分組"+o,key:o});return n.grps=r,d=function(n){},i=debounce(function(r){return n.brdsFiltered=n.brds.filter(function(n){return~n.name.indexOf(r)}),a.render(),a.get("brd-list").folder.fit()}),console.log(n),u=ld$.find("[ld-scope=admin-menu]",0),a=new ldView({root:u,action:{click:{brd:function(n){return n.node,a.get("brd-list").folder.toggle(),a.render("brd-list-toggle")}},input:{"brd-search":function(n){var r;return r=n.node,i(r.value)}}},text:{"org-name":function(){return n.org.name},"brd-name":function(){return n.brd.name},"brd-progress-text":function(){return"活動進行中"}},init:{folder:function(n){var r;return r=n.node,r.folder=new ldui.Folder({root:r})}},handler:{"org-menu":function(r){return r.node.classList.toggle("d-none",!n.org.key)},"brd-progress":function(n){return n.node.classList.toggle("text-success",!0)},"brd-list-toggle":function(n){var r;if(r=n.node,a)return r.classList.toggle("on",a.get("brd-list").classList.contains("show"))},brd:function(r){var e,t,o;return(e=r.node).classList.toggle("d-none",!(t=!n.brd.key)!=!(o=~e.getAttribute("ld").indexOf("empty"))&&(t||o))},brds:function(r){var e,t,o;return(e=r.node).classList.toggle("d-none",!(t=!n.brds.length)!=!(o=~e.getAttribute("ld").indexOf("empty"))&&(t||o))},"brd-entry":{list:function(){return n.brdsFiltered},action:{click:function(r){var e;return r.node,e=r.data,n.brd=e,a.render()}},handler:function(n){var r,e;return r=n.node,e=n.data,ld$.find(r,"span",0).innerText=e.name,ld$.find(r,".text-sm",0).innerText=e.description}},"grp-entry":{list:function(){return n.grps||[]},init:function(n){var r,e;return r=n.node,e=n.data,r.folder=new ldui.Folder({root:r}),r.view=new ldView({root:r,handler:{name:function(n){var r;return r=n.node,r.innerText=e.name}},action:{click:{"nav-tab":function(n){return n.node,d()}}}})},handler:function(n){var r;return r=n.node,n.data,r.view.render("name")}}}}),e.off()}}),ldc.app("adminGuard");