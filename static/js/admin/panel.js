// Generated by LiveScript 1.3.0
(function(){
  return ldc.register('adminPanel', [], function(){
    var lc, api;
    lc = {
      nav: {},
      cur: {},
      tab: {}
    };
    ld$.find('[ld~=nav-panel]').map(function(it){
      var isDefault, nav, ref$;
      isDefault = in$('default', (it.getAttribute('ld') || '').split(' '));
      nav = it.getAttribute('data-nav');
      it.classList.toggle('d-none', !isDefault);
      if (isDefault) {
        ((ref$ = lc.nav)[nav] || (ref$[nav] = {})).panel = it;
      }
      return it.classList.add('ld', 'ld-float-ltr-in', 'xp15');
    });
    ld$.find('[ld~=nav-tab]').map(function(it){
      var isDefault, nav, p, ref$;
      isDefault = in$('default', (it.getAttribute('ld') || '').split(' '));
      nav = it.getAttribute('data-nav');
      it.style.transition = "all .15s ease-in-out";
      if (!nav && (p = ld$.parent(it, '[data-nav]'))) {
        nav = p.getAttribute('data-nav');
      }
      it.classList.toggle('active', isDefault);
      if (isDefault) {
        ((ref$ = lc.nav)[nav] || (ref$[nav] = {})).tab = it;
        return lc.tab[nav] = it.getAttribute('data-name');
      }
    });
    document.body.addEventListener('click', function(e){
      var n, tab, nav, p, name, that, ref$, panel, key;
      if (!((n = e.target) && n.getAttribute)) {
        return;
      }
      if (!(tab = ld$.parent(n, '[ld~=nav-tab]'))) {
        return;
      }
      nav = tab.getAttribute('data-nav');
      if (!nav && (p = ld$.parent(tab, '[data-nav]'))) {
        nav = p.getAttribute('data-nav');
      }
      name = tab.getAttribute('data-name');
      if (that = ((ref$ = lc.nav)[nav] || (ref$[nav] = {})).tab) {
        that.classList.toggle('active', false);
      }
      if (that = ((ref$ = lc.nav)[nav] || (ref$[nav] = {})).panel) {
        that.classList.toggle('d-none', true);
      }
      panel = ld$.find("[ld~=nav-panel][data-nav=" + nav + "][data-name=" + name + "]", 0);
      ((ref$ = lc.nav)[nav] || (ref$[nav] = {})).tab = tab;
      ((ref$ = lc.nav)[nav] || (ref$[nav] = {})).panel = panel;
      tab.classList.toggle('active', true);
      if (panel) {
        panel.classList.toggle('d-none', false);
      }
      n = tab;
      while (n) {
        if (n.getAttribute && (key = n.getAttribute('data-prj-key'))) {
          break;
        }
        n = n.parentNode;
      }
      if (nav === 'main') {
        return ref$ = lc.cur, ref$.nav = nav, ref$.name = name, ref$.key = key, ref$.func = lc.tab[lc.cur.name], ref$;
      } else {
        return ref$ = lc.cur, ref$.func = lc.tab[lc.cur.name] = name, ref$;
      }
    });
    ld$.find('.admin-sidemenu .folder').map(function(it){
      return new ldui.Folder({
        root: it
      });
    });
    return api = {};
  });
})();
function in$(x, xs){
  var i = -1, l = xs.length >>> 0;
  while (++i < l) if (x === xs[i]) return true;
  return false;
}