function import$(t,e){var n={}.hasOwnProperty;for(var r in e)n.call(e,r)&&(t[r]=e[r]);return t}ldc.register("adminEntry",["sdbAdapter"],function(t){var e,n;return e=t.sdbAdapter,n=function(t){var e,n,r,a=this;return this.opt=t,this.root=e="string"==typeof t.root?document.querySelector(t.root):t.root,this.obj=n={active:null,data:{entries:[]}},this.view=r=new ldView({root:e,action:{input:{"entry-data":function(t){var e,i;return e=t.node,t.evt,i=e.getAttribute("data-name"),n.active&&(n.active[i]=e.value),r.render(),a.update()}},click:{"delete-entry":function(t){var e;if(t.node,t.evt,~(e=n.data.entries.indexOf(n.active)))return n.data.entries.splice(e,1),n.active=n.data.entries[e]||n.data.entries[e-1],r.render(),a.update()},"new-entry":function(t){var e;return t.node,t.evt,n.data.entries.push(e={name:"新項目",description:"未準備詳細描述的項目"}),n.active=e,r.render(),a.update()},switch:function(t){var e,r,i;return(e=t.node).classList.toggle("on"),r=e.getAttribute("data-name"),n.active&&(((i=n.active).config||(i.config={}))[r]=e.classList.contains("on")),a.update()}}},handler:{switch:function(t){var e,r,a;return e=t.node,r=e.getAttribute("data-name"),e.classList.toggle("on",!!n.active&&!!((a=n.active).config||(a.config={}))[r])},"entry-data":function(t){var e,r;return e=t.node,r=e.getAttribute("data-name"),e.value=(n.active||{})[r]||""},empty:function(t){return t.node.classList.toggle("d-none",n.data.entries.length)},entry:{list:function(){return n.data.entries},action:{click:function(t){var e;return t.node,e=t.data,t.evt,n.active=e,r.render()}},handler:function(t){var e,r,a;if(e=t.node,r=t.data,(a=ld$.find(e,".nav-link",0)).classList.toggle("active",r===n.active),0===ld$.find(a,"[ld=entry-text]").map(function(t){return t.innerText=r[t.getAttribute("data-name")]||""}).length)return a.innerText=r.name}}}}),this},n.prototype=import$(import$(Object.create(Object.prototype),e.interface),{update:function(){var t=this;return this.opsOut(function(){return t.obj.data})},opsIn:function(t){var e,n,r;if(e=t.data,t.ops,!t.source)return this.obj.data&&(n=this.obj.data.entries.indexOf(this.obj.active)),this.obj.data=JSON.parse(JSON.stringify(e||{})),this.obj.active=((r=this.obj.data).entries||(r.entries=[]))[~n?n:0]||{},this.view.render()}}),n});