function import$(r,t){var e={}.hasOwnProperty;for(var n in t)e.call(t,n)&&(r[n]=t[n]);return r}ldc.register("adminJudgePrimary",["ldcvmgr","auth","sdbAdapter","error","adminPanel"],function(r){var t,e,n,a;return r.ldcvmgr,r.auth,t=r.sdbAdapter,e=r.error,n=r.adminPanel,a=function(r){var t=this;return null==r&&(r={}),this.opt=r,this.root="string"==typeof r.root?document.querySelector(r.root):r.root,this.path=r.path,this.brd=r.brd,this.grp=null,this.view={},this.data={},this.obj={},n.on("active",function(r){var n,a;if(n=r.nav,a=r.name,r.panel,"grp-judge"===n&&"primary"===a)return t.prepare().then(function(){return t.view.render()}).catch(e())}),this.view=new ldView({root:this.root,action:{change:{choice:function(r){var e,n;return e=r.node,n=e.getAttribute("data-name"),t.obj[n]=e.value,t.update()}},click:{switch:function(r){var e,n;return e=r.node,n=e.getAttribute("data-name"),e.classList.toggle("on"),t.obj[n]=e.classList.contains("on"),t.update()}}},handler:{choice:function(r){var e,n;return e=r.node,n=e.getAttribute("data-name"),e.value=t.obj[n]||""},switch:function(r){var e,n;return e=r.node,n=e.getAttribute("data-name"),e.classList.toggle("on",!!t.obj[n])},"primary-user-link":function(r){var e;if(e=r.node,t.grp)return e.setAttribute("href","/dash/brd/"+t.brd.slug+"/grp/"+t.grp.key+"/judge/primary/user")},"primary-all-link":function(r){var e;if(e=r.node,t.grp)return e.setAttribute("href","/dash/brd/"+t.brd.slug+"/grp/"+t.grp.key+"/judge/primary/all")}}}),this},a.prototype=import$(import$(Object.create(Object.prototype),t.interface),{opsIn:function(r){var t;if(t=r.data,r.ops,!r.source)return this.obj=JSON.parse(JSON.stringify(t||{})),this.view.update()},update:function(){var r=this;return this.opsOut(function(){return r.obj})},prepare:function(){var r=this;return ld$.fetch("/dash/api/brd/"+this.brd.slug+"/grp/"+this.grp.key+"/judge/primary/all",{method:"GET"},{type:"json"}).then(function(t){var e;return r.data=e=t,e.prjs||(e.prjs=[]),console.log(e.users||(e.users=[])),(e.users||(e.users=[])).map(function(r){var t,n,a;return t={0:0,1:0,2:0,total:e.prjs.length||1},n=(a=e.data.user[r.key]||{}).prj||(a.prj={}),e.prjs.map(function(r){var e;if(null!=(e=(n[r.key]||{}).v))return t[e]++}),r.count=t})}).catch(e())},setData:function(r){var t=this;return this.grp=r,this.prepare().then(function(){return t.view.render()}).catch(e())}}),a});