ldc.register("entryctrl",[],function(){var e;return e=function(e){var t,n,r,i,a;return t={active:{},obj:{entries:[]}},n=new ldView({root:e.root,action:{input:{"entry-data":function(e){var r,i;return r=e.node,e.evt,i=r.getAttribute("data-name"),(t.active||(t.active={}))[i]=r.value,n.render()}},click:{"delete-entry":function(e){var r;if(e.node,e.evt,~(r=t.obj.entries.indexOf(t.active)))return t.obj.entries.splice(r,1),t.active=t.obj.entries[r]||t.obj.entries[r-1],n.render()},"new-entry":function(e){var r;return e.node,e.evt,t.obj.entries.push(r={name:"新項目",description:"未準備詳細描述的項目"}),t.active=r,n.render()},switch:function(e){var n,r,i;return(n=e.node).classList.toggle("on"),r=n.getAttribute("data-name"),((i=t.active||(t.active={})).config||(i.config={}))[r]=n.classList.contains("on")}}},handler:{switch:function(e){var n,r,i;return n=e.node,r=n.getAttribute("data-name"),n.classList.toggle("on",!!((i=t.active||(t.active={})).config||(i.config={}))[r])},"entry-data":function(e){var n,r;return n=e.node,r=n.getAttribute("data-name"),n.value=(t.active||{})[r]||""},empty:function(e){return e.node.classList.toggle("d-none",t.obj.entries.length)},entry:{list:function(){return t.obj.entries},action:{click:function(e){var r;return e.node,r=e.data,e.evt,t.active=r,n.render()}},handler:function(e){var n,r,i;if(n=e.node,r=e.data,(i=ld$.find(n,".nav-link",0)).classList.toggle("active",r===t.active),0===ld$.find(i,"[ld=entry-text]").map(function(e){return e.innerText=r[e.getAttribute("data-name")]||""}).length)return i.innerText=r.name}}}}),(r=new Adopter({path:e.path})).on("change",function(e){if(e.ops,!e.source)return t.obj=r.data?JSON.parse(JSON.stringify(r.data)):{},t.obj.entries||(t.obj.entries=[]),updateView()}),i=debounce(500,function(){return a()}),a=function(e){return e?i():r.update(function(){return JSON.parse(JSON.stringify(t.obj))})},r},{prepare:e}});