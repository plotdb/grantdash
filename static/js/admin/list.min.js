function import$(n,t){var e={}.hasOwnProperty;for(var r in t)e.call(t,r)&&(n[r]=t[r]);return n}var slice$=[].slice;ldc.register("adminPrjList",["error","loader","notify","ldcvmgr","auth","sdbAdapter","adminPanel"],function(n){var t,e,r,i;return t=n.error,n.loader,e=n.notify,n.ldcvmgr,n.auth,n.sdbAdapter,r=n.adminPanel,i=function(n){var i=this;return this.toc=n.toc,this.evtHandler={},this.data=[],r.on("active",function(n){var e;if(n.nav,e=n.name,n.panel,"grp-list"===e)return ld$.fetch("/dash/api/brd/"+i.toc.brd.slug+"/list",{method:"GET"},{type:"json"}).then(function(n){return i.data=n,i.view.render()}).catch(t())}),this.view=new ldView({root:n.root,handler:{empty:function(n){return n.node.classList.toggle("d-none",i.data.filter(function(n){return n.slug}).length)},prj:{list:function(){return i.data.filter(function(n){return n.slug})},init:function(n){var o,a,c;return o=n.node,a=n.local,c=n.data,a.view=new ldView({context:c,root:o,action:{click:{delete:function(n){var r,o;if(r=n.node,o=n.context,!r.classList.contains("running"))return r.classList.toggle("running",!0),ld$.fetch("/dash/api/prj/"+o.slug,{method:"delete"},{type:"json"}).finally(function(){return r.classList.toggle("running",!1)}).then(function(){var n;return e.send("success","成功刪除了「"+o.name+"」提案"),~(n=i.data.indexOf(o))&&i.data.splice(n,1),i.view.render()}).catch(t())},name:function(n){var t;return n.node,t=n.context,r.toggle({nav:"main",name:"grp-detail"}),i.setPrj(t)}}},handler:{name:function(n){var t,e;return t=n.node,e=n.context,t.innerText=e.name},index:function(n){var t,e;return t=n.node,e=n.context,t.innerText=e.key},ownername:function(n){var t,e;return t=n.node,e=n.context,t.innerText=e.ownername},"budget-consume":function(n){n.node,n.context},"budget-detail":function(n){n.node,n.context}}})}}}}),this},i.prototype=import$(Object.create(Object.prototype),{setPrj:function(n){return this.fire("set-prj",n)},on:function(n,t){var e;return((e=this.evtHandler)[n]||(e[n]=[])).push(t)},fire:function(n){var t,e,r,i,o,a=[];for(t=slice$.call(arguments,1),e=0,i=(r=this.evtHandler[n]||[]).length;e<i;++e)o=r[e],a.push(o.apply(this,t));return a}}),i});