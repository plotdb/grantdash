function import$(t,r){var e={}.hasOwnProperty;for(var n in r)e.call(r,n)&&(t[n]=r[n]);return t}ldc.register("adminPage",["error","sdbAdapter","ldcvmgr"],function(t){var r,e,n;return r=t.sdbAdapter,t.error,e=t.ldcvmgr,n=function(t){var r,n,o=this;if(this.type=r=~["org","brd"].indexOf(t.type)?t.type:null,!r)throw new ldError(1015,"admin-page: type is not defined.");return this.root=n="string"==typeof t.root?document.querySelector(t.root):t.root,this.toc=t.toc,this.data={},this.update=debounce(function(){return o._update()}),this.view=new ldView({root:n,action:{click:{deploy:function(){var t;return t={slug:o.toc.brd.slug,type:o.type},ld$.fetch("/d/deploy",{method:"POST"},{json:t,type:"json"}).then(function(){return e.toggle("deploying")}).catch(function(){return e.toggle("deploy-failed")})},opt:function(t){var r,e;return r=t.node,e=r.getAttribute("data-name"),o.data.opt=e,o.update().now(),o.view.render()}},input:{"git-url":function(t){var r,e;return r=t.node,((e=o.data).git||(e.git={})).url=r.value||"",o.update()},"git-branch":function(t){var r,e;return r=t.node,((e=o.data).git||(e.git={})).branch=r.value||"",o.update()}}},handler:{"git-url":function(t){var r,e;return r=t.node,r.value=((e=o.data).git||(e.git={})).url||""},"git-branch":function(t){var r,e;return r=t.node,r.value=((e=o.data).git||(e.git={})).branch||""},opt:function(t){var r,e,n;return r=t.node,e=r.getAttribute("data-name"),n=(o.data.opt||"default")===e,r.classList.toggle("btn-outline-secondary",!n),r.classList.toggle("btn-primary",n),r.innerHTML=n?"目前選項<i class='i-check'></i>":"使用這個選項"}}}),this},n.prototype=import$(import$(Object.create(Object.prototype),r.interface),{_update:function(){var t=this;return this.opsOut(function(){return t.data})},render:function(){return this.view.render()},opsIn:function(t){var r;if(r=t.data,t.ops,!t.source)return this.data=JSON.parse(JSON.stringify(r||{})),console.log(this.data),this.render()}}),n});