function import$(t,e){var r={}.hasOwnProperty;for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t}ldc.register("adminPage",["error","sdbAdapter","ldcvmgr"],function(t){var e,r,n;return e=t.sdbAdapter,t.error,r=t.ldcvmgr,n=function(t){var e,n,a=this;if(this.type=e=~["org","brd"].indexOf(t.type)?t.type:null,!e)throw new ldError(1015,"admin-page: type is not defined.");return this.root=n="string"==typeof t.root?document.querySelector(t.root):t.root,this.toc=t.toc,this.data={},this.update=debounce(function(){return a._update()}),this.view=new ldView({root:n,action:{click:{deploy:function(){var t;return t={slug:a.toc[a.type].slug,type:a.type},ld$.fetch("/dash/api/deploy",{method:"POST"},{json:t,type:"json"}).then(function(){return r.toggle("deploying")}).catch(function(){return r.toggle("deploy-failed")})},opt:function(t){var e,r;return e=t.node,r=e.getAttribute("data-name"),a.data.opt=r,a.update().now(),a.view.render()},"git-secret-gen":function(){var t;return((t=a.data).git||(t.git={})).secret=a.view.get("git-secret").value=suuid(),a.update()}},input:{"git-url":function(t){var e,r;return e=t.node,((r=a.data).git||(r.git={})).url=e.value||"",a.update()},"custom-css-url":function(t){var e,r;return e=t.node,((r=a.data).generic||(r.generic={})).cssUrl=e.value||"",a.update()},"git-branch":function(t){var e,r;return e=t.node,((r=a.data).git||(r.git={})).branch=e.value||"",a.update()},"git-secret":function(t){var e,r;return e=t.node,((r=a.data).git||(r.git={})).secret=e.value||"",a.update()}}},handler:{"nav-panel":function(t){var e,r;return e=t.node,r=e.getAttribute("data-name"),e.classList.toggle("d-none",!((a.data.opt||"default")===r))},"git-url":function(t){var e,r;return e=t.node,e.value=((r=a.data).git||(r.git={})).url||""},"custom-css-url":function(t){var e,r;return e=t.node,e.value=((r=a.data).generic||(r.generic={})).cssUrl||""},"git-branch":function(t){var e,r;return e=t.node,e.value=((r=a.data).git||(r.git={})).branch||""},opt:function(t){var e,r,n;return e=t.node,r=e.getAttribute("data-name"),n=(a.data.opt||"default")===r,e.classList.toggle("btn-outline-secondary",!n),e.classList.toggle("btn-primary",n),e.innerHTML=n?"目前選項<i class='i-check'></i>":"使用這個選項"}}}),this},n.prototype=import$(import$(Object.create(Object.prototype),e.interface),{_update:function(){var t=this;return this.opsOut(function(){return t.data})},render:function(){return this.view.render()},opsIn:function(t){var e;if(e=t.data,t.ops,!t.source)return this.data=JSON.parse(JSON.stringify(e||{})),this.render()}}),n});