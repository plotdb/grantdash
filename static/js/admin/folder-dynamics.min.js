var reb,root;reb=new reblock({root:"#root",action:{beforeMove:function(e,r){var t;if(r.classList.contains("folder"))return null;for(;r;){if(!r.parentNode.classList)return null;if(r.classList.contains("folder-toggle")){if(e===r.parentNode)return null;if(t=ld$.find(r.parentNode,".folder-menu",0)){t.insertBefore(r=document.createElement("div"),t.childNodes[0]),r.dummy=!0;break}}if(r.parentNode.classList.contains("folder-menu")||r.parentNode.classList.contains("folder-root"))break;if(r.parentNode===e.parentNode)break;r=r.parentNode}return!r||e===r||ld$.parent(r,null,e)?(r.dummy&&r.parentNode.removeChild(r),null):r},moving:function(e,r,t){var o;return 0===t&&r.dummy&&(o=r,r=r.parentNode.parentNode,o.parentNode.removeChild(o)),r},afterMove:function(e,r,t){if(r.dummy)return r.parentNode.removeChild(r)}}}),(root=ld$.find("#root",0)).addEventListener("click",function(e){var r,t,o,n,d,l;if(e.target.classList&&(r=ld$.parent(e.target,".folder-item",root))){if(e.target.classList.contains("i-close"))return(t=ld$.parent(r,".folder",root))&&(r=t),reb.select(r),reb.delete();if(e.target.classList.contains("i-clone")){if((t=ld$.parent(r,".folder",root))&&(r=t),reb.select(r),reb.clone(),r===t)return new ldui.Folder({root:reb.selected[0]})}else if(e.target.classList.contains("i-radio"))return r.classList.contains("folder-toggle")?(r.classList.remove("folder-toggle"),r.setAttribute("draggable",!0),o=r.parentNode,n=o.parentNode,d=o.nextSibling,l=ld$.find(o,".folder-menu",0),ld$.find(o,".folder-menu > .folder-item").map(function(e){return e.parentNode.removeChild(e),n.insertBefore(e,d)}),l.parentNode.removeChild(l),o.removeChild(r),n.insertBefore(r,o),n.removeChild(o)):(r.classList.add("folder-toggle"),o=ld$.create({name:"div",className:["folder","show"],attr:{draggable:"true"}}),l=ld$.create({name:"div",className:["folder-menu"]}),r.removeAttribute("draggable"),r.parentNode.insertBefore(o,r),r.parentNode.removeChild(r),o.appendChild(r),o.appendChild(l),new ldui.Folder({root:o}))}}),reb.init();