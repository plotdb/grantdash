// Generated by LiveScript 1.3.0
ldc.register('adminPrjList', ['error', 'loader', 'notify', 'ldcvmgr', 'auth', 'sdbAdapter', 'adminPanel'], function(arg$){
  var error, loader, notify, ldcvmgr, auth, sdbAdapter, adminPanel, Ctrl;
  error = arg$.error, loader = arg$.loader, notify = arg$.notify, ldcvmgr = arg$.ldcvmgr, auth = arg$.auth, sdbAdapter = arg$.sdbAdapter, adminPanel = arg$.adminPanel;
  Ctrl = function(opt){
    var view, this$ = this;
    this.toc = opt.toc;
    this.data = [];
    console.log(this.toc.brd.slug);
    adminPanel.on('active', function(arg$){
      var nav, name, panel;
      nav = arg$.nav, name = arg$.name, panel = arg$.panel;
      if (name === 'grp-list') {
        return ld$.fetch("/dash/api/brd/" + this$.toc.brd.slug + "/list", {
          method: 'GET'
        }, {
          type: 'json'
        }).then(function(it){
          this$.data = it;
          return this$.view.render();
        })['catch'](error());
      }
    });
    this.view = view = new ldView({
      root: opt.root,
      handler: {
        prj: {
          list: function(){
            return this$.data;
          },
          init: function(arg$){
            var node, local, data;
            node = arg$.node, local = arg$.local, data = arg$.data;
            return local.view = new ldView({
              context: data,
              root: node,
              handler: {
                name: function(arg$){
                  var node, context;
                  node = arg$.node, context = arg$.context;
                  node.innerText = context.name;
                  node.setAttribute('ld', 'nav-tab');
                  node.setAttribute('data-nav', 'main');
                  return node.setAttribute('data-name', 'grp-detail');
                },
                index: function(arg$){
                  var node, context;
                  node = arg$.node, context = arg$.context;
                  return node.innerText = context.key;
                },
                ownername: function(arg$){
                  var node, context;
                  node = arg$.node, context = arg$.context;
                  return node.innerText = context.ownername;
                },
                "budget-consume": function(arg$){
                  var node, context;
                  node = arg$.node, context = arg$.context;
                },
                "budget-detail": function(arg$){
                  var node, context;
                  node = arg$.node, context = arg$.context;
                }
              }
            });
          }
        }
      }
    });
    return this;
  };
  Ctrl.prototype = Object.create(Object.prototype);
  return Ctrl;
});