ldc.register("navbar",[],function(){var e;return e=function(e){var n,r,d,t;return n={children:[{name:"活動辦法",url:"/about"},{name:"關於我們"},{name:"歷屆活動",toggle:!0,children:[{name:"2018春季"},{name:"2018秋季"}]},{name:"成果報告"}]},r=new ldView({root:ld$.find(e.root,"[ld=folder-sample]",0),handler:{item:function(){},folder:function(){}}}),d=function(e){var a,o,i,l;return a=e.node,o=e.data,e.parent,i=a,l=o,new ldView({root:a,action:{input:{name:function(e){var n;return n=e.node,e.evt,o.name=n.value},url:function(e){var n;return n=e.node,e.evt,o.url=n.value}},click:{clone:function(e){var r;return e.node,e.evt,r=i.pdata.children.indexOf(o),i.pdata.children.splice(r+1,0,JSON.parse(JSON.stringify(o))),t.render(),console.log(JSON.stringify(n))},delete:function(e){var n;return e.node,e.evt,n=i.pdata.children.indexOf(o),i.pdata.children.splice(n,1),t.render()},"toggle-fold":function(e){var n,r,d;return e.node,e.evt,o.children?(n=i.pdata.children.indexOf(o),r=o.children,delete o.children,delete o.toggle,r=[JSON.parse(JSON.stringify(o))].concat(r),i.pdata.children.splice.apply(i.pdata.children,[n,1].concat(r)),t.render()):(n=i.pdata.children.indexOf(o),d=JSON.parse(JSON.stringify(o)),d.toggle=!0,d.children=[],i.pdata.children.splice.apply(i.pdata.children,[n,1].concat([d])),t.render())}}},handler:{name:function(e){var n;return n=e.node,n.value=o.name||""},url:function(e){var n;return n=e.node,n.value=o.url||""},list:{list:function(){return o.children},init:function(e){var n,t,a;return n=e.node,t=e.data,a=r.get(t.children?"folder":"item").childNodes[0],n.setAttribute("class",a.getAttribute("class")),n.setAttribute("draggable",!0),n.innerHTML=a.innerHTML,t.children&&(n.childNodes[0].innerHTML=r.get("item").childNodes[0].innerHTML,n.childNodes[0].classList.add("folder-toggle"),n.folder=new ldui.Folder({root:n})),n.pdata=l,n.view=d({node:n,data:t})},handler:function(e){var n;if(n=e.node,e.data,n.view)return n.view.render()}}}})},t=d({node:ld$.find(e.root,".folder-root",0),data:n}),new reblock({root:ld$.find(e.root,".folder-root",0),action:{beforeMove:function(e,n){var r;if(n.classList.contains("folder"))return null;for(;n;){if(!n.parentNode.classList)return null;if(n.classList.contains("folder-toggle")){if(e===n.parentNode)return null;if(r=ld$.find(n.parentNode,".folder-menu",0)){r.insertBefore(n=document.createElement("div"),r.childNodes[0]),n.dummy=!0;break}}if(n.parentNode.classList.contains("folder-menu")||n.parentNode.classList.contains("folder-root"))break;if(n.parentNode===e.parentNode)break;n=n.parentNode}return!n||e===n||ld$.parent(n,null,e)?(n.dummy&&n.parentNode.removeChild(n),null):n},moving:function(e,n,r){var d;return 0===r&&n.dummy&&(d=n,n=n.parentNode.parentNode,d.parentNode.removeChild(d)),n},afterMove:function(e,n,r){if(n.dummy)return n.parentNode.removeChild(n)},beforeMoveNode:function(e){var r,d,a;for(r=e.src,e.des,e.ib,d=r.parentNode;d&&!d._data;)d=d.parentNode;return(a=d?d._data:n).children.splice(a.children.indexOf(r._data),1),(d?d.view:t).unbindEachNode({name:"list",container:r.parentNode,node:r})},afterMoveNode:function(e){var r,d,a,o;for(r=e.src,e.des,e.ib,d=r.parentNode;d&&!d._data;)d=d.parentNode;return a=d?d._data:n,o=Array.from(r.parentNode.childNodes).indexOf(r),a.children.splice(Array.from(r.parentNode.childNodes).indexOf(r),0,r._data),(d?d.view:t).bindEachNode({name:"list",container:r.parentNode,idx:o,node:r}),r.pdata=a,d?d.view.render():t.render()}}})},{prepare:e}});