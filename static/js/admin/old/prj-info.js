// Generated by LiveScript 1.3.0
(function(){
  ldc.register('prjInfo', ['loader', 'notify'], function(arg$){
    var loader, notify, lc, form, view, adopter;
    loader = arg$.loader, notify = arg$.notify;
    lc = {};
    form = new ldForm({
      root: "[ld-scope='prj-info']",
      submit: "[ld='submit']",
      afterCheck: function(s, f){
        return s.all = ['name', 'description'].reduce(function(a, b){
          return a && s[b] === 0;
        }, true) ? 0 : 2;
      },
      verify: function(n, v, e){
        adopter.update(function(it){
          it[n] = v;
          return it;
        });
        return !!v ? 0 : 2;
      }
    });
    view = new ldView({
      root: "[ld-scope='prj-info']",
      action: {
        click: {
          submit: function(arg$){
            var node;
            node = arg$.node;
          },
          'delete': function(arg$){
            var node, ops;
            node = arg$.node;
            ops = [{
              p: ['group', 0],
              ld: adopter.data
            }];
            return adopter.doc.submitOp(ops);
          }
        }
      }
    });
    adopter = new Adopter({
      path: ['group', 0]
    });
    adopter.on('change', function(){
      var k, ref$, v, results$ = [];
      for (k in ref$ = this.data) {
        v = ref$[k];
        if (form.fields[k]) {
          results$.push(form.fields[k].value = v);
        }
      }
      return results$;
    });
    return adopter;
  });
  return ldc.app('prjInfo');
})();