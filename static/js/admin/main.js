// Generated by LiveScript 1.3.0
(function(){
  ldc.register('adminGuard', ['auth'], function(arg$){
    var auth;
    auth = arg$.auth;
    return auth.ensure().then(function(){
      var ref$, path, type, slug, hint;
      ref$ = /^\/([ob])\/([^/]+)\/admin/.exec(window.location.pathname) || [], path = ref$[0], type = ref$[1], slug = ref$[2];
      hint = import$({}, type
        ? type === 'o'
          ? {
            org: slug
          }
          : {
            brd: slug
          }
        : {});
      return ld$.fetch('/d/toc/', {
        method: 'POST'
      }, {
        json: hint,
        type: 'json'
      }).then(function(toc){
        return console.log(toc);
      })['catch'](function(){
        return lda.ldcvmgr.lock('create-brd-now');
      });
    })['catch'](function(){
      return lda.ldcvmgr.toggle('auth-required');
    });
  });
  return ldc.app('adminGuard');
})();
function import$(obj, src){
  var own = {}.hasOwnProperty;
  for (var key in src) if (own.call(src, key)) obj[key] = src[key];
  return obj;
}