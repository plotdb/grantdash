function import$(t,r){var n={}.hasOwnProperty;for(var e in r)n.call(r,e)&&(t[e]=r[e]);return t}ldc.register("adminJudgeFinal",["ldcvmgr","auth","sdbAdapter","error","adminPanel"],function(t){var r,n,e,a;return t.ldcvmgr,t.auth,r=t.sdbAdapter,n=t.error,e=t.adminPanel,a=function(t){var r=this;return null==t&&(t={}),this.opt=t,this.root="string"==typeof t.root?document.querySelector(t.root):t.root,this.path=t.path,this.brd=t.brd,this.grp=null,this.data={},this.obj={},e.on("active",function(t){var e,a;if(e=t.nav,a=t.name,t.panel,"grp-judge"===e&&"final"===a)return r.prepare().then(function(){return r.view.render()}).catch(n())}),this.view=new ldView({root:this.root,action:{click:{switch:function(t){var n,e;return n=t.node,e=n.getAttribute("data-name"),n.classList.toggle("on"),r.obj[e]=n.classList.contains("on"),r.update()}}},handler:{switch:function(t){var n,e;return n=t.node,e=n.getAttribute("data-name"),n.classList.toggle("on",!!r.obj[e])},"final-user-link":function(t){var n;if(n=t.node,r.grp)return n.setAttribute("href","/dash/brd/"+r.brd.slug+"/grp/"+r.grp.key+"/judge/final/user")},"final-all-link":function(t){var n;if(n=t.node,r.grp)return n.setAttribute("href","/dash/brd/"+r.brd.slug+"/grp/"+r.grp.key+"/judge/final/all")},"final-judge":{list:function(){var t;return(t=r.data).users||(t.users=[])},init:function(t){var r,n,e;return r=t.node,n=t.local,e=t.data,r.classList.toggle("d-none",!1),n.view=new ldView({root:r,context:e,handler:{name:function(t){var r,n;return r=t.node,n=t.context,r.innerText=n.name},"progress-bar":function(t){t.node}}})},handler:function(t){var r,n;return r=t.local,n=t.data,r.view.setContext(n),r.view.render()}}}}),this},a.prototype=import$(import$(Object.create(Object.prototype),r.interface),{opsIn:function(t){var r;if(r=t.data,t.ops,!t.source)return this.obj=JSON.parse(JSON.stringify(r||{})),this.view.update()},update:function(){var t=this;return this.opsOut(function(){return t.obj})},prepare:function(){var t=this;return ld$.fetch("/dash/api/brd/"+this.brd.slug+"/grp/"+this.grp.key+"/judge/final/all",{method:"GET"},{type:"json"}).then(function(r){var n,e,a,i;return t.data=n=r||{},(e=(a=t.data).data||(a.data={})).user||(e.user={}),i=n.prjs,console.log(r),n.users.map(function(t){return i.filter(function(r){var e,a;return function(){var i,o,u,s,d,c,l=[];for(e in i=((o=(s=(d=n.data.user)[c=t.key]||(d[c]={})).prj||(s.prj={}))[u=r.key]||(o[u]={})).v)a=i[e],l.push(a);return l}().reduce(function(t,r){return t+(r||0)},0)>0})})}).catch(n())},setData:function(t){return this.grp=t}}),a});