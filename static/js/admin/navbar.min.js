function import$(e,r){var n={}.hasOwnProperty;for(var t in r)n.call(r,t)&&(e[t]=r[t]);return e}ldc.register("adminNavbar",["sdbAdapter"],function(e){var r,n;return r=e.sdbAdapter,n=function(e){var r,n,t,o=this;return this.opt=e,this.view={},this.node={},this.root=r="string"==typeof e.root?document.querySelector(e.root):e.root,this.obj=n={tree:{children:[{name:"活動辦法",url:"/about"},{name:"關於我們"},{name:"歷屆活動",toggle:!0,children:[{name:"2018春季"},{name:"2018秋季"}]},{name:"成果報告"}]}},this.node={view:ld$.find(this.root,"[ld=folder-root]",0),sample:ld$.find(this.root,"[ld-scope=folder-sample]",0)},this.view.sample=new ldView({root:this.node.sample,handler:{item:function(){},folder:function(){}}}),function(){return o.ops.out(function(){return n.tree})},t=function(e){var r,i,d,a;return r=e.node,i=e.data,e.parent,d=r,a=i,new ldView({root:r,action:{input:{name:function(e){var r;return r=e.node,e.evt,i.name=r.value},url:function(e){var r;return r=e.node,e.evt,i.url=r.value}},click:{clone:function(e){var r;return e.node,e.evt,r=d.pdata.children.indexOf(i),d.pdata.children.splice(r+1,0,JSON.parse(JSON.stringify(i))),o.view.root.render(),console.log(JSON.stringify(n.tree))},delete:function(e){var r;return e.node,e.evt,r=d.pdata.children.indexOf(i),d.pdata.children.splice(r,1),o.view.root.render()},"toggle-fold":function(e){var r,n,t;return e.node,e.evt,i.children?(r=d.pdata.children.indexOf(i),n=i.children,delete i.children,delete i.toggle,n=[JSON.parse(JSON.stringify(i))].concat(n),d.pdata.children.splice.apply(d.pdata.children,[r,1].concat(n)),o.view.root.render()):(r=d.pdata.children.indexOf(i),t=JSON.parse(JSON.stringify(i)),t.toggle=!0,t.children=[],d.pdata.children.splice.apply(d.pdata.children,[r,1].concat([t])),o.view.root.render())}}},handler:{name:function(e){var r;return r=e.node,r.value=i.name||""},url:function(e){var r;return r=e.node,r.value=i.url||""},list:{list:function(){return i.children},init:function(e){var r,n,i;return r=e.node,n=e.data,i=o.view.sample.get(n.children?"folder":"item").childNodes[0],r.setAttribute("class",i.getAttribute("class")),r.setAttribute("draggable",!0),r.innerHTML=i.innerHTML,n.children&&(r.childNodes[0].innerHTML=o.view.sample.get("item").childNodes[0].innerHTML,r.childNodes[0].classList.add("folder-toggle"),r.folder=new ldui.Folder({root:r})),r.pdata=a,r.view=t({node:r,data:n})},handler:function(e){var r;if(r=e.node,e.data,r.view)return r.view.render()}}}})},this.view.root=t({node:this.node.view,data:n.tree}),new reblock({root:r,action:{beforeMove:function(e,r){var n;if(r.classList.contains("folder"))return null;for(;r;){if(!r.parentNode.classList)return null;if(r.classList.contains("folder-toggle")){if(e===r.parentNode)return null;if(n=ld$.find(r.parentNode,".folder-menu",0)){n.insertBefore(r=document.createElement("div"),n.childNodes[0]),r.dummy=!0;break}}if(r.parentNode.classList.contains("folder-menu")||r.parentNode.classList.contains("folder-root"))break;if(r.parentNode===e.parentNode)break;r=r.parentNode}return!r||e===r||ld$.parent(r,null,e)?(r.dummy&&r.parentNode.removeChild(r),null):r},moving:function(e,r,n){var t;return 0===n&&r.dummy&&(t=r,r=r.parentNode.parentNode,t.parentNode.removeChild(t)),r},afterMove:function(e,r,n){if(r.dummy)return r.parentNode.removeChild(r)},beforeMoveNode:function(e){var r,t,i;for(r=e.src,e.des,e.ib,t=r.parentNode;t&&!t._data;)t=t.parentNode;return(i=t?t._data:n.tree).children.splice(i.children.indexOf(r._data),1),(t?t.view:o.view.root).unbindEachNode({name:"list",container:r.parentNode,node:r})},afterMoveNode:function(e){var r,t,i,d;for(r=e.src,e.des,e.ib,t=r.parentNode;t&&!t._data;)t=t.parentNode;return i=t?t._data:n.tree,d=Array.from(r.parentNode.childNodes).indexOf(r),i.children.splice(Array.from(r.parentNode.childNodes).indexOf(r),0,r._data),(t?t.view:o.view.root).bindEachNode({name:"list",container:r.parentNode,idx:d,node:r}),r.pdata=i,t?t.view.render():o.view.root.render()}}}),this},n.prototype=import$(import$(Object.create(Object.prototype),r.interface),{opsIn:function(e){e.data}}),n});