ldc.register(["ldcvmgr","error"],function(t){var e,n,o,r,s;return e=t.ldcvmgr,n=t.error,o={},r=new ldForm({root:"[ld-scope=post-new]",submit:"[ld=post]"}),new ldView({root:"[ld-scope=post-new]",action:{click:{post:function(t){var e;return t.node,e={brd:"sch001",title:r.values().title},ld$.fetch("/dash/api/post/",{method:"POST"},{json:e,type:"json"}).then(function(t){return window.location.href="/dash/post/"+t.slug+"/edit"}).catch(n())}}}}),s=new ldView({initRender:!1,root:"[ld-scope=posts]",action:{click:{"new-post":function(){return e.toggle("post-new")}}},handler:{loading:function(t){return t.node.classList.toggle("d-none",!0)},empty:function(t){return t.node.classList.toggle("d-none",o.posts&&o.posts.length)},post:{list:function(){return o.posts||[]},init:function(t){var e,n,o;return e=t.node,n=t.local,o=t.data,e.classList.remove("d-none"),n.view=new ldView({root:e,context:o,handler:{title:function(t){var e,n;return e=t.node,n=t.context,e.innerText=n.title},owner:function(t){var e,n;return e=t.node,n=t.context,e.innerText=n.ownername},date:function(t){var e,n;return e=t.node,n=t.context,e.innerText=moment(n.createdtime).format("YYYY-MM-DD hh:mm:ss")},avatar:function(t){var e,n;return e=t.node,n=t.context,e.style.backgroundImage="url(/s/avatar/"+n.owner+".png)"},edit:function(t){var e,n;return e=t.node,n=t.context,e.setAttribute("href","/post/"+n.slug+"/edit")},view:function(t){var e,n;return e=t.node,n=t.context,e.setAttribute("href","/post/"+n.slug+"/")}}})},handler:function(t){var e,n;return e=t.local,n=t.data,e.view.setContext(n),e.view.render()}}}}),ld$.fetch("/dash/api/post/",{method:"GET"},{params:{brd:"sch001"},type:"json"}).then(function(t){return o.posts=t,s.render()})});