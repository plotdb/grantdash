function in$(r,n){for(var t=-1,e=n.length>>>0;++t<e;)if(r===n[t])return!0;return!1}function import$(r,n){var t={}.hasOwnProperty;for(var e in n)t.call(n,e)&&(r[e]=n[e]);return r}ldc.register("adminMenu",["sdbAdapter","loader"],function(r){var n,t;return n=r.sdbAdapter,r.loader,t=function(r){var n,t,e,o,i,d,u=this;return this.opt=r,this.toc=n=r.toc,this.grps=[],t=debounce(500,function(){return u.opsOut(function(){return u.grps})}),e=function(n){return r.setGroup(n)},o=debounce(function(r){return n.brdsFiltered=n.brds.filter(function(n){return~n.name.indexOf(r)}),d.render(),d.get("brd-list").folder.fit()}),i=ld$.find("[ld-scope=admin-menu]",0),this.view=d=new ldView({root:i,action:{click:{"brd-bar":function(r){return r.node,d.get("brd-list").folder.toggle(),d.render("brd-list-toggle")},"grp-add":function(r){var n,e;for(r.node,n=0;n<100&&(n,e="grp-"+Math.random().toString(36).substring(2),u.grps.filter(function(r){return r.key===e}).length);++n);if(u.grps.filter(function(r){return r.key===e}).length)throw new ldError(1011);return u.grps.push({key:e,info:{name:"新分組"}}),d.render("grp-entry"),t().now()}},input:{"brd-search":function(r){var n;return n=r.node,o(n.value)}}},text:{"org-name":function(){return n.org.name},"brd-name":function(){return n.brd.name},"brd-progress-text":function(){return"活動進行中"}},init:{folder:function(r){var t,e;if(t=r.node,e=r.names,t.folder=new ldui.Folder({root:t}),!n.brd.key&&in$("brd-list",e))return t.folder.toggle(!0)}},handler:{"org-menu":function(r){return r.node.classList.toggle("d-none",!n.org.key)},"brd-progress":function(r){return r.node.classList.toggle("text-success",!0)},"brd-list-toggle":function(r){var n;if(n=r.node,d)return n.classList.toggle("on",d.get("brd-list").classList.contains("show"))},brd:function(r){var t,e,o;return(t=r.node).classList.toggle("d-none",!(e=!n.brd.key)!=!(o=~t.getAttribute("ld").indexOf("empty"))&&(e||o))},brds:function(r){var t,e,o;return(t=r.node).classList.toggle("d-none",!(e=!n.brds.length)!=!(o=~t.getAttribute("ld").indexOf("empty"))&&(e||o))},"brd-entry":{list:function(){return n.brdsFiltered},handler:function(r){var n,t;return n=r.node,t=r.data,ld$.find(n,"span",0).innerText=t.name,ld$.find(n,".text-sm",0).innerText=t.description,n.setAttribute("href","/b/"+t.slug+"/admin")}},"grp-entry":{key:function(r){return r.key},list:function(){return u.grps||[]},init:function(r){var n,t,o;return n=r.node,t=r.data,n.data=t,o=n,n.folder=new ldui.Folder({root:n}),n.view=new ldView({root:n,handler:{name:function(r){var n,t;return n=r.node,n.innerText=((t=o.data).info||(t.info={})).name||"新分組"}},action:{click:{"nav-tab":function(r){return r.node,e(t)}}}})},handler:function(r){var n,t;return n=r.node,t=r.data,n.data=t,n.view.render("name")}}}}),this},t.prototype=import$(import$(Object.create(Object.prototype),n.interface),{opsIn:function(r){var n;return n=r.data,r.ops,r.source,this.grps=JSON.parse(JSON.stringify(n||[])),Array.isArray(n)||(this.grps=[]),this.view.render()}}),t});