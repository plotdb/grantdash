function in$(r,n){for(var e=-1,t=n.length>>>0;++e<t;)if(r===n[e])return!0;return!1}function import$(r,n){var e={}.hasOwnProperty;for(var t in n)e.call(n,t)&&(r[t]=n[t]);return r}ldc.register("adminMenu",["sdbAdapter","loader"],function(r){var n,e;return n=r.sdbAdapter,r.loader,e=function(r){var n,e,t,i,o,d,u=this;return this.opt=r,this.toc=n=r.toc,this.grps=[],e=debounce(500,function(){return u.opsOut(function(){return u.grps})}),t=function(n){return r.setGroup(n)},i=debounce(function(r){return n.brdsFiltered=n.brds.filter(function(n){return~n.name.indexOf(r)}),d.render(),d.get("brd-list").folder.fit()}),o=ld$.find("[ld-scope=admin-menu]",0),this.view=d=new ldView({root:o,action:{click:{"brd-bar":function(r){return r.node,d.get("brd-list").folder.toggle(),d.render("brd-list-toggle")},"grp-add":function(r){var n,t;for(r.node,n=0;n<100&&(n,t=suuid(),u.grps.filter(function(r){return r.key===t}).length);++n);if(u.grps.filter(function(r){return r.key===t}).length)throw new ldError(1011);return u.grps.push({key:t,info:{name:"新分組"}}),d.render("grp-entry"),e().now()}},input:{"brd-search":function(r){var n;return n=r.node,i(n.value)}}},text:{"org-name":function(){return n.org.name},"brd-name":function(){return n.brd.name},"brd-progress-text":function(){return"活動進行中"}},init:{folder:function(r){var e,t;if(e=r.node,t=r.names,e.folder=new ldui.Folder({root:e}),!n.brd.key&&in$("brd-list",t))return e.folder.toggle(!0)}},handler:{"brd-landing":function(r){return r.node.setAttribute("href","/brd/"+n.brd.slug+"/")},"org-menu":function(r){return r.node.classList.toggle("d-none",!n.org.slug)},"brd-progress":function(r){return r.node.classList.toggle("text-success",!0)},"brd-list-toggle":function(r){var n;if(n=r.node,d)return n.classList.toggle("on",d.get("brd-list").classList.contains("show"))},brd:function(r){var e,t,i;return(e=r.node).classList.toggle("d-none",!(t=!n.brd.key)!=!(i=~e.getAttribute("ld").indexOf("empty"))&&(t||i))},brds:function(r){var e,t,i;return(e=r.node).classList.toggle("d-none",!(t=!n.brds.length)!=!(i=~e.getAttribute("ld").indexOf("empty"))&&(t||i))},"brd-entry":{list:function(){return n.brdsFiltered},handler:function(r){var n,e;return n=r.node,e=r.data,ld$.find(n,"span",0).innerText=e.name,ld$.find(n,".text-sm",0).innerText=e.description.substring(0,30)+"...",n.setAttribute("href","/b/"+e.slug+"/admin")}},"grp-entry":{key:function(r){return r.key},list:function(){return u.grps||[]},init:function(r){var n,e,i;return n=r.node,e=r.data,n.data=e,i=n,n.folder=new ldui.Folder({root:n}),n.view=new ldView({root:n,handler:{name:function(r){var n,e;return n=r.node,n.innerText=((e=i.data).info||(e.info={})).name||"新分組"}},action:{click:{"nav-tab":function(r){return r.node,t(e)}}}})},handler:function(r){var n,e;return n=r.node,e=r.data,n.data=e,n.view.render("name")}}}}),this},e.prototype=import$(import$(Object.create(Object.prototype),n.interface),{opsIn:function(r){var n;return n=r.data,r.ops,r.source,this.grps=JSON.parse(JSON.stringify(n||[])),Array.isArray(n)||(this.grps=[]),this.view.render()}}),e});