function import$(t,r){var e={}.hasOwnProperty;for(var n in r)e.call(r,n)&&(t[n]=r[n]);return t}ldc.register("judgeBase",["error","loader","auth","ldcvmgr","sdbAdapter"],function(t){var r,e,n,o,i;return t.error,r=t.loader,e=t.auth,n=t.ldcvmgr,o=t.sdbAdapter,i=function(t){var e,n,o,i,u,s;if(this.loader=r,this.brd=t.brd,this.grp=t.grp,this.user=t.user,!(e=/brd\/([^/]+)\/grp\/([^/]+)\/judge\/([^/]+)\/([^/]+)$/.exec(window.location.href)))throw new ldError(1015);if(n=e.slice(1),o=n[0],i=n[1],u=n[2],s=n[3],"criteria"!==u&&"primary"!==u&&"final"!==u||"user"!==s&&"all"!==s)throw new ldError(1015);return this.brd=o,this.grp=i,this.type=u,this.lv=s,this.root="string"==typeof t.root?document.querySelector(t.root):t.root,this.prjs=[],this.data={},this},i.prototype=import$(import$(Object.create(Object.prototype),o.interface),{init:function(){},render:function(){},_update:function(){var t=this;return this.opsOut(function(){return t.data})},update:function(t){var r=this;return null==t&&(t={}),t.debounced?debounce(t.debounced).then(function(){return r._update()}):this._update()},fetchPrjs:function(){var t=this;return console.log("fetch prjs ... "),ld$.fetch("/dash/api/brd/"+this.brd+"/grp/"+this.grp+"/judge-list",{method:"GET"},{type:"json"}).then(function(r){return t.prjs=r})},sharedb:function(){var t,r=this;return console.log("prepare sharedb ..."),this.sdb=t=new sharedbWrapper({url:{scheme:window.location.protocol.replace(":",""),domain:window.location.host},path:"/dash/ws"}),this.hub=new Hub({sdb:t}),t.on("error",function(){return n.toggle("not-sync")}),t.on("close",function(){return n.toggle("offline-retry",!0),t.reconnect().then(function(){return r.getdoc()}).then(function(){return r.adapt({hub:r.hub,path:[]})}).then(function(){return console.log("reinitialized.")}).then(function(){return n.toggle("offline-retry",!1)})}),t.ready()},getdoc:function(){var t=this;return console.log("get judge document ... "),this.hub.doc=null,this.sdb.get({id:"brd/"+this.brd+"/grp/"+this.grp+"/judge/"+this.type,watch:function(r,e){return t.hub.fire("change",{ops:r,source:e})},create:function(){return{}}}).then(function(r){return t.hub.doc=r,t.adapt({hub:t.hub,path:t.user?["user",t.user]:[]})})},opsIn:function(){},auth:function(){var t=this;return console.log("get user auth info ..."),e.get().then(function(r){return t.global=r})}}),i});