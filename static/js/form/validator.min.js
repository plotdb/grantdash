ldc.register("prjFormValidation",["prjFormCriteria"],function(n){var t,e;return t=n.prjFormCriteria,e={number:{type:function(n,t,e){return!(isNaN(n)||null!=t&&isNaN(t)||null!=e&&isNaN(e))},convert:function(n,t,e){return[+n,+(t||0),+(e||0)]},gte:function(n,t){return n>=t},lte:function(n,t){return n<=t},ge:function(n,t){return n>t},le:function(n,t){return n<t},eq:function(n,t){return n===t},ne:function(n,t){return n!==t},between:function(n,t,e){return n>=t&&n<=e}},string:{type:function(n,t){return null!=n&&null!=t},convert:function(n,t){return[n+"",t+""]},include:function(n,t){return~n.indexOf(t)},exclude:function(n,t){return!~n.indexOf(t)},email:function(n,t){return/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.[a-z]{2,}|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i.exec(n)},url:function(n,t){return/^\s*http(s):\/\/[a-zA-Z0-9-]+/.exec(n)}},count:{type:function(n,t,e){return null!=n&&null!=t&&null!=e},convert:function(n,t,e){var r;return r=Array.isArray(n)?n.length:null!=n?n.length||(n+"").length:0,[r,+(t||0),+(e||0)]},gte:function(n,t){return n>=t},lte:function(n,t){return n<=t},eq:function(n,t){return n===t},between:function(n,t,e){return n>=t&&n<=e}},regex:{match:function(n,t){return new RegExp(t).exec(n)},"not-match":function(n,t){return!new RegExp(t).exec(n)}},smaller:{type:function(n,t,e){return!(isNaN(n)||null!=t&&isNaN(t)||null!=e&&isNaN(e))},convert:function(n,t,e){return[+n,+(t||0),+(e||0)]},le:function(n,t){return n<t}}},{validate:function(n,r){var u,i,l,c,o,a,f,s,g,p,h,d,m,v;if(null==r&&(r=!1),u=[n.value||(n.value={}),n.config||(n.config={}),!1],i=u[0],l=u[1],c=u[2],"form-checkpoint"===n.name?c=!(o=i.list||(i.list=[])).length||o.filter(function(n){return n.title&&n.desc&&n.date}).length!==o.length:"form-datetime"===n.name?(o=i,c=!(i.start&&(!l.rangeEnabled||i.end))):"form-checkbox"===(u=n.name)||"form-radio"===u?c=!(o=(i.list||[]).concat(i.other?[i.otherValue]:[])).filter(function(n){return n}).length:i.content?c=!(o=i.content):i.list?c=!((o=i.list)&&o.length):(o=(u=[null,!0])[0],c=u[1]),c&&(l.required&&n.touched||r))return{result:!1,criteria:{invalid:"此為必填項目"}};if(c)return{};for(n.touched=!0,a=0,f=(u=n.criteria||[]).length;a<f;++a)if((s=u[a]).enabled&&(g=t.schema.types[s.type],s.type&&g&&(p=e[g.ops])[s.op]&&(h=p.convert(o,s.input1,s.input2),d=h[0],m=h[1],v=h[2],!p.type(d,m,v)||!p[s.op](d,m,v))))return{result:!1,criteria:s};return{result:!0}}}});