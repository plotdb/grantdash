!function(){var n,e,t,r,i,o,a;n={types:{number:{name:"數值",ops:"number"},string:{name:"文字",ops:"string"},length:{name:"長度",ops:"count"},regex:{name:"正規式",ops:"regex"},count:{name:"選項數",ops:"count"},"file-size":{name:"檔案大小",ops:"smaller"},"file-format":{name:"檔案格式",ops:"extension"},"file-count":{name:"檔案數量",ops:"count"}},ops:{extension:{extension:{name:"副檔名"}},regex:{match:{name:"符合"},"not-match":{name:"不符"}},count:{gte:{name:'<div class="s mr-2">&#x2265;</div> 大於或等於'},lte:{name:'<div class="s mr-2">&#x2264;</div> 小於或等於'},eq:{name:'<div class="s mr-2">=</div> 等於'},between:{name:'<div class="s mr-2">&#x223c;</div> 介於',field:2}},string:{include:{name:"包含"},exclude:{name:"不包含"},email:{name:"電子郵件位置"},url:{name:"網址"}},number:{gte:{name:'<div class="s mr-2">&#x2265;</div> 大於或等於'},lte:{name:'<div class="s mr-2">&#x2264;</div> 小於或等於'},ge:{name:'<div class="s mr-2">&gt;</div> 大於'},le:{name:'<div class="s mr-2">&lt;</div> 小於'},eq:{name:'<div class="s mr-2">=</div> 等於'},ne:{name:'<div class="s mr-2">&#x2260;</div> 不等於'},between:{name:'<div class="s mr-2">&#x223c;</div> 介於',field:2}},smaller:{ge:{name:'<div class="s mr-2">&gt;</div> 大於'}}},support:{"form-short-answer":["number","string","length","regex"],"form-long-answer":["string","length","regex"],"form-radio":[],"form-checkbox":["count"],"form-file":["file-size","file-formt","file-count"],"form-budget":["count"],"form-checkpoint":["count"]}},e=function(e){var t,r,i,o;return t=e.node,r=e.data,i=r,(t.view||(t.view={})).criteria=o=new ldView({root:t,action:{click:{add:function(){return(r.criteria||(r.criteria=[])).push({type:"number"}),o.render()}}},handler:{criteria:{list:function(){return r.criteria||(r.criteria=[])},action:{click:function(n){var e,t,r,i;if(e=n.node,t=n.data,r=n.evt,i=ld$.parent(r.target,".dropdown-item",e))return i.type&&(t.type=i.type),i.op&&(t.op=i.op),e.view.render()}},init:function(e){var t,r,o,a;return t=e.node,r=e.data,o=function(){return r.type||n.support[i.name][0]||"number"},a=function(){var e,t,i;return e=n.ops[n.types[o()].ops],t=function(){var n,r=[];for(i in n=e)t=n[i],r.push(t);return r}()[0],e[r.op]||t||{name:""}},ld$.find(t,".dropdown .dropdown-toggle").map(function(n){return new Dropdown(n)}),t.view=new ldView({root:t,action:{input:{input1:function(n){var e;return e=n.node,r.input1=ld$.find(e,"input",0).value},input2:function(n){var e;return e=n.node,r.input2=ld$.find(e,"input",0).value},invalid:function(n){var e;return e=n.node,r.invalid=e.value}}},handler:{input1:function(n){var e;return e=n.node,ld$.find(e,"input",0).value=r.input1||""},input2:function(n){var e;return(e=n.node).classList.toggle("d-none",(a().field||1)<2),ld$.find(e,"input",0).value=r.input2||""},invalid:function(n){var e;return e=n.node,e.value=r.invalid||""},type:function(e){var t;return t=e.node,t.innerText=n.types[o()].name},op:function(n){var e;return e=n.node,e.innerHTML=a().name},types:{list:function(){return n.support[i.name]},handler:function(e){var t,r;return t=e.node,r=e.data,t.innerText=n.types[r].name,t.type=r}},ops:{list:function(){var e,t,r,i=[];for(e in t=n.ops[n.types[o()].ops])r=t[e],i.push([e,r]);return i},handler:function(n){var e,t;return e=n.node,t=n.data,e.innerHTML=t[1].name,e.op=t[0]}}}})},handler:function(n){var e;if(e=n.node,n.data,e.view)return e.view.render()}}}})},t=function(n){var e,t,r,i;return e=n.node,t=n.data,r=t.data||(t.data=[]),(e.view||(e.view={})).list=i=new ldView({root:e,action:{click:{"list-add":function(){return r.push({title:"某個點",description:"某個點的描述"}),i.render()}}},handler:{list:{list:function(){return r},init:function(n){var e,t;return e=n.node,t=n.data,e.view=new ldView({root:e,action:{input:{"list-title":function(n){var e;return e=n.node,t.title=e.innerText},"list-description":function(n){var e;return e=n.node,t.description=e.innerText}}},handler:{"list-title":function(n){var e;return e=n.node,e.innerText=t.title},"list-description":function(n){var e;return e=n.node,e.innerText=t.description}}})},render:function(n){return n.node.render()}}}})},r={"form-radio":t,"form-checkbox":t,"form-checkpoint":t},i=function(n){var e,t;return e=n.node,t=n.data,(e.view||(e.view={})).block=new ldView({root:e,action:{input:{title:function(n){var e;return e=n.node,n.evt,t.title=e.innerText},description:function(n){var e;return e=n.node,n.evt,t.description=e.innerText}},click:{switch:function(n){var e;return e=n.node,n.evt,e.classList.toggle("on"),(t.config||(t.config={}))[e.getAttribute("data-name")]=e.classList.contains("on")},delete:function(n){n.node,n.evt},clone:function(n){return n.node,n.evt,console.log(t)}}},handler:{title:function(n){var e;return e=n.node,e.innerText=t.title},description:function(n){var e;return e=n.node,e.innerText=t.description},switch:function(n){var e;return(e=n.node).classList.toggle("on",!!(t.config||(t.config={}))[e.getAttribute("data-name")])}}})},o=[{name:"form-short-answer",title:"提問的標題1",description:"提問的描述",config:{required:!0},criteria:[{}]},{name:"form-long-answer",title:"提問的標題2",description:"提問的描述",config:{required:!0},criteria:[{}]},{name:"form-checkpoint",title:"提問的標題3",description:"提問的描述",data:[{title:"第一個點",description:"第一個點的描述"}],config:{required:!0},criteria:[{}]},{name:"form-radio",title:"提問的標題3",description:"提問的描述",data:[{title:"第一個點",description:"第一個點的描述"}],config:{required:!0},criteria:[{}]},{name:"form-checkbox",title:"提問的標題3",description:"提問的描述",data:[{title:"第一個點",description:"第一個點的描述"}],config:{required:!0},criteria:[{}]}],new ldView({root:"#form",handler:{block:{list:function(){return o},init:function(n){var t,o,a,d;if(t=n.node,o=n.data,a=ld$.find("[data-name="+o.name+"]",0).cloneNode(!0),t.innerHTML="",t.appendChild(a),i({node:t,data:o}),e({node:t,data:o}),d=r[o.name])return d({node:t,data:o})}}}}),a={get:function(){}},new reblock({root:"#form",blockManager:a,action:{afterMoveNode:function(n){var e,t;if(e=n.src,n.des,n.ib,e.parentNode.hasAttribute("hostable")){for(t=e.parentNode;t&&!t._data;)t=t.parentNode;if(!t)return;return t._data.data=Array.from(e.parentNode.childNodes).filter(function(n){return 1===n.nodeType}).map(function(n){return n._data}).filter(function(n){return n}),t.view.list.render()}}}})}();