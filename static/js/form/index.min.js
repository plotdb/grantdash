function in$(n,e){for(var r=-1,t=e.length>>>0;++r<t;)if(n===e[r])return!0;return!1}ldc.register("prjForm",["prjFormCriteria","prjFormBlock"],function(n){var e,r,t,o,i,a,d,l,c,u;return n.prjFormCriteria,e=n.prjFormBlock,!0,r={view:!0},t={get:function(n){return new Promise(function(e,r){var t,o;return(t=ld$.find("[data-name="+n+"]",0))||r(new Error("block not found")),(o=ld$.create({name:"div",attr:{draggable:!0}})).appendChild(t.cloneNode(!0)),e(o)})}},o={},i=function(n){if(o[n.key]=n.value,console.log("[update]",o),l)return l.render()},new ldView({root:"#form",handler:{block:{list:function(){return sampleBlocks},init:function(n){var r,o;return r=n.node,o=n.data,t.get(o.name).then(function(n){(n=n.childNodes[0]).parentNode.removeChild(n),r.innerHTML="",r.appendChild(n),e.render({node:r,data:o,viewMode:!0,update:i})})}}}}),(a=ld$.find("[ld-scope=blocksrc]",0))&&new ldView({root:a,action:{dragstart:{block:function(n){var e;return e=n.node,n.evt.dataTransfer.setData("text/plain",e.getAttribute("data-name")+"")}}}}),new reblock({root:"#form",blockManager:t,action:{afterMoveNode:function(n){var e,r;if(e=n.src,n.des,n.ib,e.parentNode.hasAttribute("hostable")){for(r=e.parentNode;r&&!r._data;)r=r.parentNode;if(!r)return;return r._data.data=Array.from(e.parentNode.childNodes).filter(function(n){return 1===n.nodeType}).map(function(n){return n._data}).filter(function(n){return n}),r.view.list.render()}}}}),d=function(){var n,e,r,t,i;return n=function(){var n=[];for(e in o)n.push(e);return n}().length,r=sampleBlocks.length,t=n/sampleBlocks.length,i=r-n,{remain:i,done:n,total:r,percent:t}},l=new ldView({root:document.body,action:{click:{viewing:function(){return r.view=!r.view,l.render(),u.render()},invalid:function(){var n,e,r,t,i,a,d;e=[];for(r in o)e.push(r);for(n=e,t=0,i=sampleBlocks.length;t<i&&(a=t,in$(sampleBlocks[a].key+"",n));++t);if(d=ld$.find("#block-"+sampleBlocks[a].key,0))return scrollto(d)}}},handler:{nview:function(n){return n.node.classList.toggle("d-none",r.view)},view:function(n){return n.node.classList.toggle("d-none",!r.view)},progress:function(n){var e;return e=n.node,e.style.width=100*d().percent+"%"},invalid:function(n){return n.node.classList.toggle("d-none",0===d().remain)},valid:function(n){return n.node.classList.toggle("d-none",d().remain>0)},remain:function(n){var e;return e=n.node,e.innerText=d().remain},submit:function(n){return n.node.classList.toggle("disabled",d().remain>0)}}}),c={"form-checkpoint":function(n){var e,r,t;return e=n.node,r=n.data,n.block,t=(r.list||[]).map(function(n){return'<div class="item">\n<div class="title">'+n.title+"</div>\n<p>"+n.desc+"</p>\n</div>"}).join(""),e.innerHTML='<div class="timeline-list">'+t+"</div>",console.log(r)},"form-radio":function(n){var e,r;return e=n.node,r=n.data,e.innerText=(r.list||[]).concat(r.other?[r.otherValue||""]:[]).join(", ")},"form-checkbox":function(n){var e,r;return e=n.node,r=n.data,e.innerText=(r.list||[]).concat(r.other?[r.otherValue||""]:[]).join(", ")}},u=new ldView({root:document.body,handler:{answer:{list:function(){return sampleBlocks},init:function(n){var e,r;return e=n.node,r=n.data,e.view=new ldView({root:e,handler:{title:function(n){var e;return e=n.node,e.innerText=r.title||""},desc:function(n){var e;return e=n.node,e.innerText=r.desc||""},content:function(n){var e;return e=n.node,c[r.name]?c[r.name]({node:e,block:r,data:o[r.key]||{}}):e.innerText=(o[r.key]||{}).content||""}}})},handler:function(n){var e;return e=n.node,n.data,e.view.render()}}}})}),ldc.app("prjForm");