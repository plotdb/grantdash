ldc.register("prjForm",["prjFormCriteria","prjFormBlock"],function(e){var n,t,r,o,i,a,d,c,l;return e.prjFormCriteria,n=e.prjFormBlock,!0,t={view:!0},r={get:function(e){return new Promise(function(n,t){var r,o;return(r=ld$.find("[data-name="+e+"]",0))||t(new Error("block not found")),(o=ld$.create({name:"div",attr:{draggable:!0}})).appendChild(r.cloneNode(!0)),n(o)})}},o={},i=function(e){return o[e.key]=e.value,console.log("[update]",o)},new ldView({root:"#form",handler:{block:{list:function(){return sampleBlocks},init:function(e){var t,o;return t=e.node,o=e.data,r.get(o.name).then(function(e){(e=e.childNodes[0]).parentNode.removeChild(e),t.innerHTML="",t.appendChild(e),n.render({node:t,data:o,viewMode:!0,update:i})})}}}}),(a=ld$.find("[ld-scope=blocksrc]",0))&&new ldView({root:a,action:{dragstart:{block:function(e){var n;return n=e.node,e.evt.dataTransfer.setData("text/plain",n.getAttribute("data-name")+"")}}}}),new reblock({root:"#form",blockManager:r,action:{afterMoveNode:function(e){var n,t;if(n=e.src,e.des,e.ib,n.parentNode.hasAttribute("hostable")){for(t=n.parentNode;t&&!t._data;)t=t.parentNode;if(!t)return;return t._data.data=Array.from(n.parentNode.childNodes).filter(function(e){return 1===e.nodeType}).map(function(e){return e._data}).filter(function(e){return e}),t.view.list.render()}}}}),function(){},d=new ldView({root:document.body,action:{click:{viewing:function(){return t.view=!t.view,d.render(),l.render()}}},handler:{nview:function(e){return e.node.classList.toggle("d-none",t.view)},view:function(e){return e.node.classList.toggle("d-none",!t.view)}}}),c={"form-checkpoint":function(e){var n,t,r;return n=e.node,t=e.data,e.block,r=(t.list||[]).map(function(e){return'<div class="item">\n<div class="title">'+e.title+"</div>\n<p>"+e.desc+"</p>\n</div>"}).join(""),n.innerHTML='<div class="timeline-list">'+r+"</div>",console.log(t)},"form-radio":function(e){var n,t;return n=e.node,t=e.data,n.innerText=(t.list||[]).concat(t.other?[t.otherValue||""]:[]).join(", ")},"form-checkbox":function(e){var n,t;return n=e.node,t=e.data,n.innerText=(t.list||[]).concat(t.other?[t.otherValue||""]:[]).join(", ")}},l=new ldView({root:document.body,handler:{answer:{list:function(){return sampleBlocks},init:function(e){var n,t;return n=e.node,t=e.data,n.view=new ldView({root:n,handler:{title:function(e){var n;return n=e.node,n.innerText=t.title||""},desc:function(e){var n;return n=e.node,n.innerText=t.desc||""},content:function(e){var n;return n=e.node,c[t.name]?c[t.name]({node:n,block:t,data:o[t.key]||{}}):n.innerText=(o[t.key]||{}).content||""}}})},handler:function(e){var n;return n=e.node,e.data,n.view.render()}}}})}),ldc.app("prjForm");