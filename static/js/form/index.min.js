ldc.register("prjForm",["prjFormCriteria","prjFormBlock"],function(e){var r,t,n,o;return e.prjFormCriteria,r=e.prjFormBlock,!0,t={get:function(e){return new Promise(function(r,t){var n,o;return(n=ld$.find("[data-name="+e+"]",0))||t(new Error("block not found")),(o=ld$.create({name:"div",attr:{draggable:!0}})).appendChild(n.cloneNode(!0)),r(o)})}},n=function(e){return console.log("update",e.value)},new ldView({root:"#form",handler:{block:{list:function(){return sampleBlocks},init:function(e){var o,a;return o=e.node,a=e.data,t.get(a.name).then(function(e){(e=e.childNodes[0]).parentNode.removeChild(e),o.innerHTML="",o.appendChild(e),r.render({node:o,data:a,viewMode:!0,update:n})})}}}}),(o=ld$.find("[ld-scope=blocksrc]",0))&&new ldView({root:o,action:{dragstart:{block:function(e){var r;return r=e.node,e.evt.dataTransfer.setData("text/plain",r.getAttribute("data-name")+"")}}}}),new reblock({root:"#form",blockManager:t,action:{afterMoveNode:function(e){var r,t;if(r=e.src,e.des,e.ib,r.parentNode.hasAttribute("hostable")){for(t=r.parentNode;t&&!t._data;)t=t.parentNode;if(!t)return;return t._data.data=Array.from(r.parentNode.childNodes).filter(function(e){return 1===e.nodeType}).map(function(e){return e._data}).filter(function(e){return e}),t.view.list.render()}}}})}),ldc.app("prjForm");