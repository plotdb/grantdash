ldc.register("prjForm",["prjFormCriteria","prjFormBlock"],function(e){var r,t,n,o,a;return e.prjFormCriteria,r=e.prjFormBlock,!0,t={get:function(e){return new Promise(function(r,t){var n,o;return(n=ld$.find("[data-name="+e+"]",0))||t(new Error("block not found")),(o=ld$.create({name:"div",attr:{draggable:!0}})).appendChild(n.cloneNode(!0)),r(o)})}},n={},o=function(e){return n[e.key]=e.value,console.log("[update]",n)},new ldView({root:"#form",handler:{block:{list:function(){return sampleBlocks},init:function(e){var n,a;return n=e.node,a=e.data,t.get(a.name).then(function(e){(e=e.childNodes[0]).parentNode.removeChild(e),n.innerHTML="",n.appendChild(e),r.render({node:n,data:a,viewMode:!0,update:o})})}}}}),(a=ld$.find("[ld-scope=blocksrc]",0))&&new ldView({root:a,action:{dragstart:{block:function(e){var r;return r=e.node,e.evt.dataTransfer.setData("text/plain",r.getAttribute("data-name")+"")}}}}),new reblock({root:"#form",blockManager:t,action:{afterMoveNode:function(e){var r,t;if(r=e.src,e.des,e.ib,r.parentNode.hasAttribute("hostable")){for(t=r.parentNode;t&&!t._data;)t=t.parentNode;if(!t)return;return t._data.data=Array.from(r.parentNode.childNodes).filter(function(e){return 1===e.nodeType}).map(function(e){return e._data}).filter(function(e){return e}),t.view.list.render()}}}})}),ldc.app("prjForm");