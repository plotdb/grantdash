!function(){var e,t,n,r,i;e=function(e){var t,n,r,i;return t=e.node,n=e.data,r=n.data||(n.data=[]),(t.view||(t.view={})).list=i=new ldView({root:t,action:{click:{"list-add":function(){return r.push({title:"某個點",desc:"某個點的描述"}),i.render()}}},handler:{list:{list:function(){return r},init:function(e){var t,n,r;return t=e.node,n=e.data,(r=t.hasAttribute("data-user-editable"))||t.removeAttribute("draggable"),t.view=new ldView({root:t,action:{input:{"list-data":function(e){var t;return t=e.node,n[t.getAttribute("data-name")]=t.innerText}}},init:{"list-data":function(e){var t;if((t=e.node).setAttribute("data-name",t.getAttribute("editable")),!r)return t.removeAttribute("editable")}},handler:{"list-data":function(e){var t;return t=e.node,t.innerText=n[t.getAttribute("data-name")]||""}}})},render:function(e){return e.node.render()}}}})},t={"form-radio":e,"form-checkbox":e,"form-checkpoint":e},n=function(e){var t,n;return t=e.node,n=e.data,(t.view||(t.view={})).block=new ldView({root:t,action:{input:{title:function(e){var t;return t=e.node,e.evt,n.title=t.innerText},desc:function(e){var t;return t=e.node,e.evt,n.desc=t.innerText}}},handler:{title:function(e){var t;return t=e.node,t.innerText=n.title,t.removeAttribute("editable")},desc:function(e){var t;return t=e.node,t.innerText=n.desc,t.removeAttribute("editable")},"edit-only":function(e){return e.node.remove()}}})},r=[{name:"form-short-answer",title:"提問的標題1",desc:"提問的描述",config:{required:!0},criteria:[{}]},{name:"form-long-answer",title:"提問的標題2",desc:"提問的描述",config:{required:!0},criteria:[{}]},{name:"form-checkpoint",title:"提問的標題3",desc:"提問的描述",data:[{title:"第一個點",desc:"第一個點的描述"}],config:{required:!0},criteria:[{}]},{name:"form-radio",title:"提問的標題3",desc:"提問的描述",data:[{title:"第一個點",desc:"第一個點的描述"}],config:{required:!0},criteria:[{}]},{name:"form-checkbox",title:"提問的標題3",desc:"提問的描述",data:[{title:"第一個點",desc:"第一個點的描述"}],config:{required:!0},criteria:[{}]}],i={get:function(e){return new Promise(function(t,n){var r,i;return(r=ld$.find("[data-name="+e+"]",0))||n(new Error("block not found")),(i=ld$.create({name:"div",attr:{draggable:!0}})).appendChild(r.cloneNode(!0)),t(i)})}},new ldView({root:"#form",handler:{block:{list:function(){return r},init:function(e){var r,a;return r=e.node,a=e.data,i.get(a.name).then(function(e){var i;if((e=e.childNodes[0]).parentNode.removeChild(e),r.innerHTML="",r.appendChild(e),n({node:r,data:a}),i=t[a.name])return i({node:r,data:a})})}}}}),new reblock({root:"#form",blockManager:i,action:{afterMoveNode:function(e){var t,n;if(t=e.src,e.des,e.ib,t.parentNode.hasAttribute("hostable")){for(n=t.parentNode;n&&!n._data;)n=n.parentNode;if(!n)return;return n._data.data=Array.from(t.parentNode.childNodes).filter(function(e){return 1===e.nodeType}).map(function(e){return e._data}).filter(function(e){return e}),n.view.list.render()}}}})}();