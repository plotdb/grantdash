!function(){var e,n,r,t;e={children:[{name:"活動辦法",url:"/about"},{name:"關於我們"},{name:"歷屆活動",toggle:!0,children:[{name:"2018春季"},{name:"2018秋季"}]},{name:"成果報告"}]},n=new ldView({root:"[ld=folder-sample]",handler:{item:function(){},folder:function(){}}}),r=function(d){var a,i,o,l;return a=d.node,i=d.data,d.parent,o=a,l=i,new ldView({root:a,action:{input:{name:function(e){var n;return n=e.node,e.evt,i.name=n.value},url:function(e){var n;return n=e.node,e.evt,i.url=n.value}},click:{clone:function(n){var r;return n.node,n.evt,r=o.pdata.children.indexOf(i),o.pdata.children.splice(r+1,0,JSON.parse(JSON.stringify(i))),t.render(),console.log(JSON.stringify(e))},delete:function(e){var n;return e.node,e.evt,n=o.pdata.children.indexOf(i),o.pdata.children.splice(n,1),t.render()},"toggle-fold":function(e){var n,r,d;return e.node,e.evt,i.children?(n=o.pdata.children.indexOf(i),r=i.children,delete i.children,delete i.toggle,r=[JSON.parse(JSON.stringify(i))].concat(r),o.pdata.children.splice.apply(o.pdata.children,[n,1].concat(r)),t.render()):(n=o.pdata.children.indexOf(i),d=JSON.parse(JSON.stringify(i)),d.toggle=!0,d.children=[],o.pdata.children.splice.apply(o.pdata.children,[n,1].concat([d])),t.render())}}},handler:{name:function(e){var n;return n=e.node,n.value=i.name||""},url:function(e){var n;return n=e.node,n.value=i.url||""},list:{list:function(){return i.children},init:function(e){var t,d,a;return t=e.node,d=e.data,a=n.get(d.children?"folder":"item").childNodes[0],t.setAttribute("class",a.getAttribute("class")),t.setAttribute("draggable",!0),t.innerHTML=a.innerHTML,d.children&&(t.childNodes[0].innerHTML=n.get("item").childNodes[0].innerHTML,t.childNodes[0].classList.add("folder-toggle"),t.folder=new ldui.Folder({root:t})),t.pdata=l,t.view=r({node:t,data:d})},handler:function(e){var n;if(n=e.node,e.data,n.view)return n.view.render()}}}})},t=r({node:root,data:e}),new reblock({root:root,action:{beforeMove:function(e,n){var r;if(n.classList.contains("folder"))return null;for(;n;){if(!n.parentNode.classList)return null;if(n.classList.contains("folder-toggle")){if(e===n.parentNode)return null;if(r=ld$.find(n.parentNode,".folder-menu",0)){r.insertBefore(n=document.createElement("div"),r.childNodes[0]),n.dummy=!0;break}}if(n.parentNode.classList.contains("folder-menu")||n.parentNode.classList.contains("folder-root"))break;if(n.parentNode===e.parentNode)break;n=n.parentNode}return!n||e===n||ld$.parent(n,null,e)?(n.dummy&&n.parentNode.removeChild(n),null):n},moving:function(e,n,r){var t;return 0===r&&n.dummy&&(t=n,n=n.parentNode.parentNode,t.parentNode.removeChild(t)),n},afterMove:function(e,n,r){if(n.dummy)return n.parentNode.removeChild(n)},beforeMoveNode:function(n){var r,d,a;for(r=n.src,n.des,n.ib,d=r.parentNode;d&&!d._data;)d=d.parentNode;return(a=d?d._data:e).children.splice(a.children.indexOf(r._data),1),(d?d.view:t).unbindEachNode({name:"list",container:r.parentNode,node:r})},afterMoveNode:function(n){var r,d,a,i;for(r=n.src,n.des,n.ib,d=r.parentNode;d&&!d._data;)d=d.parentNode;return a=d?d._data:e,i=Array.from(r.parentNode.childNodes).indexOf(r),a.children.splice(Array.from(r.parentNode.childNodes).indexOf(r),0,r._data),(d?d.view:t).bindEachNode({name:"list",container:r.parentNode,idx:i,node:r}),r.pdata=a,d?d.view.render():t.render()}}})}();