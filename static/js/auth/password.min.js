ldc.register("password-reset",["auth","ldcvmgr"],function(e){var r,t,s;if(r=e.auth,e.ldcvmgr,document.querySelector("#password-reset-mail")&&(t=new ldForm({names:function(){return["email"]},submit:"input[type=submit]",root:"#password-reset-mail",afterCheck:function(e,r){if(1!==e.email&&!/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.[a-z]{2,}|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i.exec(r.email.value))return e.email=2}}),r.get({check:!0}).then(function(){return t.fields._csrf.value=global.csrfToken})),document.querySelector("#password-reset"))return s=new ldForm({names:function(){return["password","confirm"]},root:"#password-reset",submit:"input[type=submit]",afterCheck:function(e,r){var t,s,o;if(t=[this.fields.password.value,this.fields.confirm.value],s=t[0],o=t[1],1!==e.password&&s.length<8&&(e.password=2,e.confirm=1),s!==o&&(1!==e.confirm||o&&0===e.password))return e.confirm=2}}),r.get({check:!0}).then(function(){var e;if(s.fields._csrf.value=global.csrfToken,!(e=(/^\?token=(.+)$/.exec(window.location.search)||[])[1])){if(e=(document.cookie||"").split(";").filter(function(e){return/password-reset-token/.exec(e)})[0],!(e=(e||"").split("=")[1]))return lda.ldcvmgr.toggle("reset-password-invalid");document.cookie="password-reset-token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}return s.root.setAttribute("action","/dash/api/me/passwd/reset/"+e)})});