ldc.register(["stage","general","ldcvmgr","adminInfo","prjCreate","auth","error","loader","general"],function(r){var e,n,t,o,a,i,d;return e=r.stage,r.general,r.ldcvmgr,n=r.adminInfo,r.prjCreate,t=r.auth,o=r.error,a=r.loader,r.general,a.on(),i={},d=/^\/(?:dash\/)?brd\/([^/]+)\/prj\/create/.exec(window.location.pathname)||/^\/(?:dash\/)?brd\/([^/]+)\/grp\/([^/]+)\/prj\/create/.exec(window.location.pathname)||[],d={brd:d[1],grp:d[2]},t.get().then(function(){return e.get({brd:d.brd})}).then(function(r){if(null==r&&(r={}),i.stage=r.config||{},!i.stage["prj-new"])return Promise.reject(new ldError(1016))}).then(function(){return ld$.fetch("/dash/api/brd/"+d.brd+"/form",{method:"GET"},{type:"json"})}).then(function(r){var e,t,o,a,g;return i.brd=r,i.grps=(e=r.detail).group||(e.group={}),i.grp=i.grps.filter(function(r){return r.key===d.grp})[0]||i.grps[0],i.grp?(t=ld$.find("[ld-scope=prj-create]",0),o=ld$.find(t,"input[name=brd]",0),o.value=i.brd.slug,a=1!==i.grps.length,new n({root:t,type:"prj"}),g=new ldView({root:t,action:{input:{grp:function(r){var e;return e=r.node,d.grp=e.value,i.grp=i.grps.filter(function(r){return r.key===d.grp})[0],g.render()}}},handler:{"grp-option":{list:function(){return i.grps},handler:function(r){var e,n;return e=r.node,n=r.data,e.value=n.key,e.innerText=n.info.name}},"brd-name":function(r){var e;return e=r.node,e.innerText=i.brd.name},"grp-name":function(r){var e;return e=r.node,e.innerText=i.grp.info.name},"show-grp":function(r){return r.node.classList.toggle("d-none",!a)},inited:function(r){return r.node.classList.toggle("invisible",!1)}}}),o=ld$.find(t,"select[name=grp]",0),o.value=i.grp.key):Promise.reject(new Error(1015,"group is not found"))}).finally(function(){return a.off()}).catch(o())});