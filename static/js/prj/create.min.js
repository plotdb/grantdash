ldc.register(["stage","general","ldcvmgr","adminInfo","prjCreate","auth","error","loader","general"],function(r){var e,n,t,o,a,i,d,g;return e=r.stage,r.general,n=r.ldcvmgr,t=r.adminInfo,r.prjCreate,o=r.auth,a=r.error,i=r.loader,r.general,i.on(),d={},g=/^\/(?:dash\/)?brd\/([^/]+)\/prj\/create/.exec(window.location.pathname)||/^\/(?:dash\/)?brd\/([^/]+)\/grp\/([^/]+)\/prj\/create/.exec(window.location.pathname)||[],g={brd:g[1],grp:g[2]},o.get().then(function(){return e.get({brd:g.brd})}).then(function(r){if(null==r&&(r={}),d.stage=r.config||{},!d.stage["prj-new"])return Promise.reject(new ldError(1016))}).then(function(){return ld$.fetch("/dash/api/brd/"+g.brd+"/form",{method:"GET"},{type:"json"})}).then(function(r){var e,n,o,a,i;return d.brd=r,d.grps=(e=r.detail).group||(e.group={}),d.grp=d.grps.filter(function(r){return r.key===g.grp})[0]||d.grps[0],d.grp?(n=ld$.find("[ld-scope=prj-create]",0),o=ld$.find(n,"input[name=brd]",0),o.value=d.brd.slug,a=1!==d.grps.length,new t({root:n,type:"prj"}),i=new ldView({root:n,action:{input:{grp:function(r){var e;return e=r.node,g.grp=e.value,d.grp=d.grps.filter(function(r){return r.key===g.grp})[0],i.render()}}},handler:{"grp-option":{list:function(){return d.grps},handler:function(r){var e,n;return e=r.node,n=r.data,e.value=n.key,e.innerText=n.info.name}},"brd-name":function(r){var e;return e=r.node,e.innerText=d.brd.name},"grp-name":function(r){var e;return e=r.node,e.innerText=d.grp.info.name},"show-grp":function(r){return r.node.classList.toggle("d-none",!a)},inited:function(r){return r.node.classList.toggle("invisible",!1)}}}),o=ld$.find(n,"select[name=grp]",0),o.value=d.grp.key):Promise.reject(new ldError("no group",1015))}).finally(function(){return i.off()}).catch(function(r){return 1015===ldError.id(r)&&"no group"===r.message?n.toggle("prj-create-no-grp"):a()(r)})});