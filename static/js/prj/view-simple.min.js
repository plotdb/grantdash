function import$(t,n){var e={}.hasOwnProperty;for(var r in n)e.call(n,r)&&(t[r]=n[r]);return t}ldc.register("prjViewSimple",[],function(){var t;return t=function(n){var e,r,i=this;return this.root=e="string"==typeof n.root?document.querySelector(n.root):n.root,this.form=n.form,this.answer=n.answer,this.prj=n.prj,this.brd=n.brd,this.org=n.org,r=function(t){return i.answer[t.key]||t.value},this.view=new ldView({root:e,handler:{item:{list:function(){return i.form.list},init:function(n){var e,s,o;return e=n.node,s=n.local,o=n.data,s.view=new ldView({context:o,root:e,handler:{title:function(t){var n,e;return n=t.node,e=t.context,n.innerText=e.title},desc:function(t){var n,e;return n=t.node,e=t.context,n.classList.toggle("d-none",!e.config["show-desc"]),n.innerText=e.desc},content:function(n){var e,s,o,a;return e=n.node,s=n.context,o=r(s),a=t.render({block:s,answer:o,prj:i.prj,org:i.org}),e.classList.toggle("empty",!a),e.innerHTML=DOMPurify.sanitize(a)}}})},handler:function(t){var n,e;return n=t.local,e=t.data,n.view.setContext(e),n.view.render()}}}}),this},t.prototype=import$(Object.create(Object.prototype),{update:function(t){var n,e,r;return n=t.form,e=t.answer,r=t.prj,this.form=n,this.answer=e,this.prj=r,this.render()},render:function(){return this.view.render()}}),t.render=function(t){var n,e,r,i,s,o,a,l,c,d,u,m,f,p,h;if(n=t.block,e=t.answer,r=t.prj,t.brd,i=t.org,s={},n&&e)return e.content?s=e.useMarkdown?DOMPurify.sanitize(marked(e.content||"")):htmlentities(e.content||""):e.start?(o=moment(e.start).format("YYYY-MM-DD hh:mm:ss"),a=moment(e.end).format("YYYY-MM-DD hh:mm:ss"),s=(n.config||(n.config={})).rangeEnabled?o+" - "+a:o):e.list?"form-file"===(l=n.name)||"form-thumbnail"===l?(c=(e.list||[]).map(function(t){return'<li><a href="/dash/org/'+i+"/prj/"+r+"/upload/"+t.fn+'" target="_blank" rel="noopener noreferrer">\n'+htmlentities(t.name)+"\n</a></li>"}).join(""),s=DOMPurify.sanitize(c,{ADD_ATTR:["target"]})):"form-checkpoint"===n.name?(c=(e.list||[]).map(function(t){return'<div class="item"><div class="fields mb-4">\n<div class="d-flex align-items-end mb-2">\n  <h4 class="mb-0 mr-2">'+htmlentities(t.title)+'</h4>\n  <p class="text-muted text-sm mb-0">'+htmlentities(t.date)+"</p>\n</div>\n<p>"+htmlentities(t.desc)+"</p>\n</div></div>"}).join(""),s='<div class="form-block mt-4 p-2"><div class="timeline-list">'+DOMPurify.sanitize(c)+"</div></div>"):(d=e.list.concat(e.otherValue&&e.other?[e.otherValue]:[]),s=DOMPurify.sanitize(d.join("<br>"))):"form-budget"===n.name?((u=JSON.parse(JSON.stringify(e.sheet))).map(function(t){return t.push(+t[2]+ +t[3])}),m=u.reduce(function(t,n){return t+ +n[4]},0),f=u.reduce(function(t,n){return t+ +n[3]},0),p=(Math.round(1e3*f/(m||1))/10+"").replace("(.d)d*","$1"),h='<table class=\'mb-2 form-budget-table\'><tr>\n<th rowspan="2">分類</th>\n<th rowspan="2">項目</th>\n<th colspan="3">預估</th>\n</tr>\n<tr><th>自籌</th><th>補助</th><th>總計</th></tr>\n'+(u=u.map(function(t){if(t.filter(function(t){return t}).length)return"<tr>"+t.map(function(t){return"<td>"+(t||" ")+"</td>"}).join("")+"</tr>"}).filter(function(t){return t}).join(""))+'\n</table>\n<div class="d-flex justify-content-between">\n<div><span class="text-muted text-sm">總金額</span>\n     <span class="font-weight-bold">'+m+'</span>\n     <span class="text-muted text-sm">元</span></div>\n<div><span class="text-muted text-sm">補助金額</span>\n     <span class="font-weight-bold">'+f+'</span>\n     <span class="text-muted text-sm">元</span></div>\n<div><span class="text-muted text-sm">補助比例</span>\n     <span class="font-weight-bold">'+p+'</span>\n     <span class="text-muted text-sm">%</span></div>\n</div>',s=DOMPurify.sanitize(h)):s="",s},t});