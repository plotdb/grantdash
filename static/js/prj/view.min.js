ldc.register("prjView",["auth","error","stage","viewLocals","discussView","prjViewSimple"],function(e){var r,t,n,o,i,s,a,l,c,u;return r=e.auth,t=e.error,n=e.stage,o=e.discussView,e.discussEdit,i=e.viewLocals,s=e.prjViewSimple,a={},l=i.prj,c=i.brd,u=i.grp,r.get().then(function(e){return a.global=e,n.get({brd:c.slug})}).then(function(e){var r,t,n,i;return null==e&&(e={}),a.stage=e.config||{},r=(t=l.detail||(l.detail={})).answer||(t.answer={}),n=(t=u.form||(u.form={})).list||(t.list=[]),i={},n.map(function(e){return i[e.key]=e}),o&&new o({root:"[ld-scope=discuss]"}).init(),new ldView({global:!0,root:document.body,handler:{"stage-ctrl":function(e){var r,t;return r=e.node,t=r.getAttribute("data-name"),r.classList.toggle("d-none",!a.stage[t])}}}),new ldView({root:document.body,init:{"btn-share":function(e){var r,t;return r=e.node,t=e.local,t.clipboard=new ClipboardJS(r,{text:function(e){return window.location.href}}),t.clipboard.on("success",function(){return clearTimeout(t.h),r.classList.add("tip-on"),t.h=setTimeout(function(){return r.classList.remove("tip-on")},1e3)})}},handler:{"btn-edit":function(e){return e.node.classList.toggle("d-none",a.global.user.key!==l.owner)}}}),new s({root:"[ld-scope=form-answer]",prj:l.slug,brd:c.slug,org:c.org,form:u.form,answer:r})}).catch(t())}),ldc.app("prjView");