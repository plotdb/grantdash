ldc.register("prjView",["auth","error","viewLocals","discussView","discussEdit"],function(e){var t,i,n,r;return t=e.auth,i=e.error,n=e.discussView,e.discussEdit,r=e.viewLocals,t.get().then(function(e){var t,i,o,s,a,u,c;return t=r.prj,i=r.brd,o=r.grp,s=(a=t.detail||(t.detail={})).answer||(a.answer={}),u=(a=o.form||(o.form={})).list||(a.list=[]),c={},u.map(function(e){return c[e.key]=e}),{view:new n({root:"[ld-scope=discuss]"})}.view.init(),new ldView({root:document.body,init:{"btn-share":function(e){var t,i;return t=e.node,i=e.local,i.clipboard=new ClipboardJS(t,{text:function(e){return window.location.href}}),i.clipboard.on("success",function(){return clearTimeout(i.h),t.classList.add("tip-on"),i.h=setTimeout(function(){return t.classList.remove("tip-on")},1e3)})}},handler:{"btn-edit":function(t){return t.node.classList.toggle("d-none",e.user.key!==r.owner)},answer:function(e){var n,r,o,a,u,l,d;if(n=e.node,r=n.getAttribute("data-key"),o=c[r],(a=s[r]||{})&&(o=c[r]))return a.content?a.useMarkdown?n.innerHTML=DOMPurify.sanitize(marked(a.content)):n.innerText=a.content:a.list?"form-file"===(u=o.name)||"form-thumbnail"===u?(l=(a.list||[]).map(function(e){return'<li><a href="/dash/org/'+i.org+"/prj/"+t.slug+"/upload/"+e.path+'">\n'+htmlentities(e.name)+"\n</a></li>"}).join(""),n.innerHTML=DOMPurify.sanitize(l)):"form-checkpoint"===o.name?(l=(a.list||[]).map(function(e){return"<p><div><b><big>"+htmlentities(e.title)+"</big></b></div>\n<div>"+htmlentities(e.desc)+"</div></p>"}).join(""),n.innerHTML="<blockquote style='margin-left:1em'>"+DOMPurify.sanitize(l)+"</blockquote>"):(d=a.list.concat(a.otherValue&&a.other?[a.otherValue]:[]),n.innerHTML=DOMPurify.sanitize(d.join("<br>"))):void 0}}})}).catch(i())}),ldc.app("prjView");