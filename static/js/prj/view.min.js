ldc.register("prjView",["auth","error","viewLocals","discussView","discussEdit"],function(e){var t,n,i,r;return t=e.auth,n=e.error,i=e.discussView,e.discussEdit,r=e.viewLocals,t.get().then(function(e){var t,n,o,s,a,u,c;return t=r.prj,n=r.brd,o=r.grp,s=(a=t.detail||(t.detail={})).answer||(a.answer={}),u=(a=o.form||(o.form={})).list||(a.list=[]),c={},u.map(function(e){return c[e.key]=e}),new i({root:"[ld-scope=discuss]"}).init(),new ldView({root:document.body,init:{"btn-share":function(e){var t,n;return t=e.node,n=e.local,n.clipboard=new ClipboardJS(t,{text:function(e){return window.location.href}}),n.clipboard.on("success",function(){return clearTimeout(n.h),t.classList.add("tip-on"),n.h=setTimeout(function(){return t.classList.remove("tip-on")},1e3)})}},handler:{"btn-edit":function(t){return t.node.classList.toggle("d-none",e.user.key!==r.owner)},answer:function(e){var i,r,o,a,u,l,d;if(i=e.node,r=i.getAttribute("data-key"),o=c[r],(a=s[r]||{})&&(o=c[r]))return a.content?a.useMarkdown?i.innerHTML=DOMPurify.sanitize(marked(a.content)):i.innerText=a.content:a.list?"form-file"===(u=o.name)||"form-thumbnail"===u?(l=(a.list||[]).map(function(e){return'<li><a href="/dash/org/'+n.org+"/prj/"+t.slug+"/upload/"+e.path+'">\n'+htmlentities(e.name)+"\n</a></li>"}).join(""),i.innerHTML=DOMPurify.sanitize(l)):"form-checkpoint"===o.name?(l=(a.list||[]).map(function(e){return"<p><div><b><big>"+htmlentities(e.title)+"</big></b></div>\n<div>"+htmlentities(e.desc)+"</div></p>"}).join(""),i.innerHTML="<blockquote style='margin-left:1em'>"+DOMPurify.sanitize(l)+"</blockquote>"):(d=a.list.concat(a.otherValue&&a.other?[a.otherValue]:[]),i.innerHTML=DOMPurify.sanitize(d.join("<br>"))):void 0}}})}).catch(n())}),ldc.app("prjView");