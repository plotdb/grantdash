ldc.register("prjView",["auth","error","viewLocals"],function(e){var n,t,i;return n=e.auth,t=e.error,i=e.viewLocals,n.get().then(function(e){var n,t,r,o,a,u,l;return n=i.prj,t=i.brd,r=i.grp,o=(a=n.detail||(n.detail={})).answer||(a.answer={}),u=(a=r.form||(r.form={})).list||(a.list=[]),l={},u.map(function(e){return l[e.key]=e}),new ldView({root:document.body,init:{"btn-share":function(e){var n,t;return n=e.node,t=e.local,t.clipboard=new ClipboardJS(n,{text:function(e){return window.location.href}}),t.clipboard.on("success",function(){return clearTimeout(t.h),n.classList.add("tip-on"),t.h=setTimeout(function(){return n.classList.remove("tip-on")},1e3)})}},handler:{"btn-edit":function(n){return n.node.classList.toggle("d-none",e.user.key!==i.owner)},answer:function(e){var i,r,a,u,s,c,d;if(i=e.node,r=i.getAttribute("data-key"),a=l[r],(u=o[r]||{})&&(a=l[r]))return u.content?u.useMarkdown?i.innerHTML=DOMPurify.sanitize(marked(u.content)):i.innerText=u.content:u.list?"form-file"===(s=a.name)||"form-thumbnail"===s?(c=(u.list||[]).map(function(e){return'<li><a href="/dash/org/'+t.org+"/prj/"+n.slug+"/upload/"+e.path+'">\n'+htmlentities(e.name)+"\n</a></li>"}).join(""),i.innerHTML=DOMPurify.sanitize(c)):"form-checkpoint"===a.name?(c=(u.list||[]).map(function(e){return"<p><div><b><big>"+htmlentities(e.title)+"</big></b></div>\n<div>"+htmlentities(e.desc)+"</div></p>"}).join(""),i.innerHTML="<blockquote style='margin-left:1em'>"+DOMPurify.sanitize(c)+"</blockquote>"):(d=u.list.concat(u.otherValue&&u.other?[u.otherValue]:[]),i.innerHTML=DOMPurify.sanitize(d.join("<br>"))):void 0}}})}).catch(t())}),ldc.app("prjView");